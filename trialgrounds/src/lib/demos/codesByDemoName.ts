import type { CodesByDemoName } from './demoCodes';

export const codesByDemoName: CodesByDemoName = new Map([["flip",{"usage":"import { getProjection, measureSubject, setInlineStyles, clearInlineStyles } from 'projectrix';\nimport { animate } from 'motion';\n\nfunction flip(target: HTMLElement, nextParent: HTMLElement): void {\n  const subject = measureSubject(target);\n\n  nextParent.append(target);\n\n  requestAnimationFrame(() => {\n    const { toSubject, toTargetOrigin } = getProjection(subject, target);\n\n    // set target to subject's projection\n    setInlineStyles(target, toSubject);\n\n    // FLIP back to origin\n    const flipAnimation = animate(\n      target,\n      { ...toTargetOrigin },\n      {\n        duration: 1,\n        easing: 'ease-out',\n      },\n    );\n\n    // clear inline styles once they're redundant\n    flipAnimation.finished.then(() => clearInlineStyles(target, toTargetOrigin));\n  });\n}\n","code":"<script lang=\"ts\">\n  import { onDestroy, onMount, tick } from 'svelte';\n  import { getProjection, clearInlineStyles, setInlineStyles, measureSubject } from 'projectrix';\n  import { animate, type AnimationControls } from 'motion';\n  import type { Writable } from 'svelte/store';\n  import type { Options } from '$lib/options';\n  import type DemoStartSlot from '../DemoStartSlot.svelte';\n\n  // start slot and options are part of demos infrastructure\n  export let startSlot: DemoStartSlot;\n  export let options: Writable<Options>;\n  $: log = $options.log;\n\n  let target: HTMLElement;\n  let leftParent: HTMLElement;\n  let rightParent: HTMLElement;\n\n  let currentParent: HTMLElement | undefined;\n  let currentAnim: AnimationControls | undefined;\n  let currentTimeout: NodeJS.Timeout | undefined;\n\n  onMount(async () => {\n    await tick();\n    startSlot.show();\n    currentParent = leftParent;\n\n    currentTimeout = setTimeout(() => {\n      flipToNextParent();\n    }, 1000);\n  });\n\n  onDestroy(() => {\n    clearTimeout(currentTimeout);\n    currentTimeout = undefined;\n\n    currentAnim?.pause();\n    currentAnim = undefined;\n  });\n\n  function flipToNextParent(): void {\n    let subjectEl = startSlot.isShowing() ? startSlot.getSlotSubject() : target;\n    const subject = measureSubject(subjectEl);\n\n    const nextParent = currentParent === rightParent ? leftParent : rightParent;\n    nextParent.append(target);\n    currentParent = nextParent;\n\n    requestAnimationFrame(() => {\n      const { toSubject, toTargetOrigin } = getProjection(subject, target, { log });\n\n      setInlineStyles(target, toSubject);\n      target.style.opacity = '1';\n      startSlot.hide();\n\n      currentAnim = animate(\n        target,\n        {\n          ...toTargetOrigin,\n        },\n        {\n          duration: 1,\n          easing: 'ease-out',\n        },\n      );\n\n      currentAnim.finished.then(() => {\n        clearInlineStyles(target);\n\n        playParentAnimation(nextParent).finished.then(() => {\n          currentTimeout = setTimeout(() => {\n            flipToNextParent();\n          }, 1000);\n        });\n      });\n    });\n  }\n\n  function playParentAnimation(parent: HTMLElement): AnimationControls {\n    const dir = parent === rightParent ? -1 : 1;\n\n    currentAnim = animate(\n      parent,\n      {\n        transform: [\n          'skew(' + 15 * dir + 'deg)',\n          'skew(' + 15 * dir + 'deg) rotate(' + -20 * dir + 'deg)',\n          'skew(' + 15 * dir + 'deg) rotate(' + 20 * dir + 'deg)',\n          'skew(' + 15 * dir + 'deg)',\n        ],\n      },\n      {\n        duration: 1,\n        easing: 'ease-in-out',\n      },\n    );\n\n    return currentAnim;\n  }\n</script>\n\n<div class=\"size-container\">\n  <div class=\"parents-container\">\n    <div bind:this={leftParent} class=\"parent left\">\n      <div bind:this={target} class=\"demo-target child\" />\n    </div>\n\n    <div bind:this={rightParent} class=\"parent right\"></div>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .size-container {\n    position: relative;\n    width: 100%;\n    aspect-ratio: 4 / 1;\n    margin-top: 1.5em;\n\n    container-type: size;\n  }\n\n  .parents-container {\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    gap: 25cqw;\n  }\n\n  .parent {\n    width: 21cqw;\n    height: 21cqw;\n    border: dashed 3px darkmagenta;\n\n    will-change: transform;\n\n    .demo-target {\n      position: absolute;\n      top: 0px;\n      left: 0px;\n\n      width: 10.75cqw;\n      height: 10.75cqw;\n\n      // last i checked, safari webkit can't handle non-integer borders\n      // on transformed elements, so i always recommend pixels for borders\n      border: solid 3px limegreen;\n\n      opacity: 0;\n    }\n  }\n  .left {\n    transform: skew(15deg);\n  }\n  .right {\n    transform: skew(-15deg);\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">measureSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'motion'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> flip</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">nextParent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> subject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> measureSubject</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  nextParent</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">append</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  requestAnimationFrame</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // set target to subject's projection</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // FLIP back to origin</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> flipAnimation</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      target</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'ease-out'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    );</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // clear inline styles once they're redundant</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    flipAnimation</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">finished</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\">));</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span>\n<span class=\"line\"></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onDestroy</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">measureSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> AnimationControls</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'motion'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Writable</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte/store'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Options</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/options'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#E06C75\"> DemoStartSlot</span><span style=\"color:#C678DD\"> from</span><span style=\"color:#98C379\"> '../DemoStartSlot.svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // start slot and options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  export</span><span style=\"color:#C678DD\"> let</span><span style=\"color:#E06C75\"> startSlot</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">DemoStartSlot</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  export</span><span style=\"color:#C678DD\"> let</span><span style=\"color:#E06C75\"> options</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Writable</span><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E5C07B\">Options</span><span style=\"color:#ABB2BF\">>;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  $</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftParent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentParent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentAnim</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">AnimationControls</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentTimeout</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">NodeJS</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">Timeout</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">show</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentParent</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> leftParent</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentTimeout</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      flipToNextParent</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }, </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onDestroy</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearTimeout</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTimeout</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentTimeout</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">pause</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> flipToNextParent</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    let</span><span style=\"color:#E06C75\"> subjectEl</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">isShowing</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E5C07B\"> startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">getSlotSubject</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">:</span><span style=\"color:#E06C75\"> target</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> subject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> measureSubject</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subjectEl</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> nextParent</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> currentParent</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#C678DD\"> ?</span><span style=\"color:#E06C75\"> leftParent</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    nextParent</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">append</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentParent</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> nextParent</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    requestAnimationFrame</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">hide</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        target</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">          ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">          duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">          easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'ease-out'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      );</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">finished</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        playParentAnimation</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextParent</span><span style=\"color:#ABB2BF\">).</span><span style=\"color:#E5C07B\">finished</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">          currentTimeout</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">            flipToNextParent</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">          }, </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> playParentAnimation</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">parent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">AnimationControls</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> dir</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> parent</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#C678DD\"> ?</span><span style=\"color:#56B6C2\"> -</span><span style=\"color:#D19A66\">1</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      parent</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        transform</span><span style=\"color:#ABB2BF\">: [</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">          'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">          'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg) rotate('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#56B6C2\"> -</span><span style=\"color:#D19A66\">20</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">          'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg) rotate('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 20</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">          'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        ],</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'ease-in-out'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    );</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#E06C75\"> currentAnim</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"size-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parents-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftParent</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parent left\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">target</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-target child\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightParent</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parent right\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .size-container</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">relative</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    aspect-ratio: </span><span style=\"color:#D19A66\">4</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    margin-top: </span><span style=\"color:#D19A66\">1.5</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: size;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .parents-container</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: </span><span style=\"color:#D19A66\">flex</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    gap: </span><span style=\"color:#D19A66\">25</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .parent</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">21</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">21</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: </span><span style=\"color:#D19A66\">dashed</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\"> darkmagenta;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    will-change: transform;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">    .demo-target</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      position: </span><span style=\"color:#D19A66\">absolute</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      top: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      left: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      width: </span><span style=\"color:#D19A66\">10.75</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      height: </span><span style=\"color:#D19A66\">10.75</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">      // last i checked, safari webkit can't handle non-integer borders</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">      // on transformed elements, so i always recommend pixels for borders</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      border: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\"> limegreen;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      opacity: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .left</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">skew</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">15</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .right</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">skew</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">-15</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}],["animate",{"usage":"import { getProjection, type PartialProjection } from 'projectrix';\nimport { animate, type AnimationControls } from 'motion';\n\nlet currentAnim: AnimationControls | undefined;\n\nfunction animateDirect(subject: HTMLElement, target: HTMLElement): void {\n  // stop current animation; motion one will update target's inline\n  // styles to mid-animation values\n  if (currentAnim?.currentTime && currentAnim.currentTime < 1) {\n    currentAnim.stop();\n  }\n\n  const toSubject = getProjection(subject, target).toSubject as PartialProjection;\n  delete toSubject.borderStyle; // preserve target border style\n\n  currentAnim = animate(\n    target,\n    { ...toSubject },\n    {\n      duration: 0.4,\n      easing: 'ease-out',\n    },\n  );\n}\n","code":"<script lang=\"ts\">\n  import type { Options } from '$lib/options';\n  import { animate, type AnimationControls } from 'motion';\n  import { getProjection, setInlineStyles, type PartialProjectionResults } from 'projectrix';\n  import { onMount, tick } from 'svelte';\n  import type { Writable } from 'svelte/store';\n  import type DemoStartSlot from '../DemoStartSlot.svelte';\n\n  // start slot and options are part of demos infrastructure\n  export let startSlot: DemoStartSlot;\n  export let options: Writable<Options>;\n  $: log = $options.log;\n\n  let target: HTMLElement;\n\n  let currentAnim: AnimationControls | undefined;\n\n  onMount(async () => {\n    await tick();\n    startSlot.show();\n  });\n\n  function swapSlotForTarget(target: HTMLElement): void {\n    const { toSubject } = getProjection(startSlot.getSlotSubject(), target);\n\n    setInlineStyles(target, toSubject);\n    target.style.opacity = '1';\n\n    startSlot.hide();\n  }\n\n  function animateDirect(subject: HTMLElement, target: HTMLElement): void {\n    if (startSlot.isShowing()) {\n      swapSlotForTarget(target);\n    }\n\n    // stop current animation; motion one will update target's inline styles\n    // to mid-animation values\n    if (currentAnim?.currentTime && currentAnim.currentTime < 1) {\n      currentAnim.stop();\n    }\n\n    const { toSubject } = getProjection(subject, target, { log }) as PartialProjectionResults;\n    delete toSubject.borderStyle; // preserve target border style\n\n    currentAnim = animate(\n      target,\n      { ...toSubject },\n      {\n        duration: 0.4,\n        easing: 'ease-out',\n      },\n    );\n  }\n\n  function subjectClickHandler(subject: HTMLElement): void {\n    animateDirect(subject, target);\n  }\n</script>\n\n<div class=\"size-container\">\n  <div class=\"subject-flex\">\n    <button class=\"demo-subject\" on:click={(e) => subjectClickHandler(e.currentTarget)} />\n    <button class=\"demo-subject rotated\" on:click={(e) => subjectClickHandler(e.currentTarget)} />\n    <button class=\"demo-subject parent\" on:click={(e) => subjectClickHandler(e.currentTarget)}>\n      <button\n        class=\"demo-subject child\"\n        on:click|stopPropagation={(e) => subjectClickHandler(e.currentTarget)}\n      />\n    </button>\n  </div>\n</div>\n\n<div bind:this={target} class=\"demo-target\" />\n\n<style lang=\"scss\">\n  button {\n    all: unset;\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  .demo-subject:focus-visible,\n  .parent:focus-visible {\n    outline: solid 2px white;\n    outline-offset: 4px;\n  }\n\n  .demo-target {\n    // any positioning works with Projectrix\n    position: absolute;\n\n    // last i checked, safari webkit can't handle non-integer borders\n    // on transformed elements, so i always recommend pixels for borders\n    border: solid 3px limegreen;\n\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  .size-container {\n    position: relative;\n    width: 100%;\n    aspect-ratio: 4 / 1;\n    margin-top: 1.5em;\n\n    container-type: size;\n  }\n\n  .subject-flex {\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    gap: 10cqw;\n  }\n\n  .demo-subject {\n    width: 14.25cqw;\n    height: 14.25cqw;\n    border: dashed 3px yellow;\n\n    cursor: pointer;\n  }\n\n  .rotated {\n    transform: rotate(45deg);\n  }\n\n  .parent {\n    width: 21cqw;\n    height: 21cqw;\n    border-color: darkmagenta;\n\n    transform: skew(-15deg);\n\n    .child {\n      position: absolute;\n      top: 0px;\n      left: 0px;\n\n      width: 10.75cqw;\n      height: 10.75cqw;\n    }\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> PartialProjection</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> AnimationControls</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'motion'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">let</span><span style=\"color:#E06C75\"> currentAnim</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">AnimationControls</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> animateDirect</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // stop current animation; motion one will update target's inline</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // styles to mid-animation values</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">currentAnim</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#E06C75\">currentTime</span><span style=\"color:#56B6C2\"> &#x26;&#x26;</span><span style=\"color:#E5C07B\"> currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTime</span><span style=\"color:#56B6C2\"> &#x3C;</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">stop</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> toSubject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">).</span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> PartialProjection</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  delete</span><span style=\"color:#E5C07B\"> toSubject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderStyle</span><span style=\"color:#ABB2BF\">; </span><span style=\"color:#7F848E;font-style:italic\">// preserve target border style</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    target</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    { ...</span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">0.4</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'ease-out'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  );</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span>\n<span class=\"line\"></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Options</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/options'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> AnimationControls</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'motion'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Writable</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte/store'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#E06C75\"> DemoStartSlot</span><span style=\"color:#C678DD\"> from</span><span style=\"color:#98C379\"> '../DemoStartSlot.svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // start slot and options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  export</span><span style=\"color:#C678DD\"> let</span><span style=\"color:#E06C75\"> startSlot</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">DemoStartSlot</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  export</span><span style=\"color:#C678DD\"> let</span><span style=\"color:#E06C75\"> options</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Writable</span><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E5C07B\">Options</span><span style=\"color:#ABB2BF\">>;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  $</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentAnim</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">AnimationControls</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">show</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> swapSlotForTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">getSlotSubject</span><span style=\"color:#ABB2BF\">(), </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">hide</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> animateDirect</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">isShowing</span><span style=\"color:#ABB2BF\">()) {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      swapSlotForTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // stop current animation; motion one will update target's inline styles</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // to mid-animation values</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">currentAnim</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#E06C75\">currentTime</span><span style=\"color:#56B6C2\"> &#x26;&#x26;</span><span style=\"color:#E5C07B\"> currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTime</span><span style=\"color:#56B6C2\"> &#x3C;</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">stop</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> }) </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    delete</span><span style=\"color:#E5C07B\"> toSubject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderStyle</span><span style=\"color:#ABB2BF\">; </span><span style=\"color:#7F848E;font-style:italic\">// preserve target border style</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      target</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { ...</span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">0.4</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'ease-out'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    );</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animateDirect</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"size-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"subject-flex\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject\"</span><span style=\"color:#C678DD\"> on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">click</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject rotated\"</span><span style=\"color:#C678DD\"> on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">click</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject parent\"</span><span style=\"color:#C678DD\"> on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">click</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject child\"</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">click</span><span style=\"color:#ABB2BF\">|</span><span style=\"color:#56B6C2\">stopPropagation</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">target</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  button</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    all: </span><span style=\"color:#D19A66\">unset</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#56B6C2\">    -webkit-tap-highlight-color</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">transparent</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .demo-subject</span><span style=\"color:#56B6C2\">:focus-visible</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .parent</span><span style=\"color:#56B6C2\">:focus-visible</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 2</span><span style=\"color:#E06C75\">px</span><span style=\"color:#D19A66\"> white</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-offset: </span><span style=\"color:#D19A66\">4</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .demo-target</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // any positioning works with Projectrix</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">absolute</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // last i checked, safari webkit can't handle non-integer borders</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // on transformed elements, so i always recommend pixels for borders</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\"> limegreen;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    pointer-events: </span><span style=\"color:#D19A66\">none</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .size-container</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">relative</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    aspect-ratio: </span><span style=\"color:#D19A66\">4</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    margin-top: </span><span style=\"color:#D19A66\">1.5</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: size;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .subject-flex</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: </span><span style=\"color:#D19A66\">flex</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    gap: </span><span style=\"color:#D19A66\">10</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .demo-subject</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">14.25</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">14.25</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: </span><span style=\"color:#D19A66\">dashed</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#D19A66\"> yellow</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    cursor</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">pointer</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .rotated</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">45</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .parent</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">21</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">21</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-color: darkmagenta;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">skew</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">-15</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">    .child</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      position: </span><span style=\"color:#D19A66\">absolute</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      top: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      left: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      width: </span><span style=\"color:#D19A66\">10.75</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      height: </span><span style=\"color:#D19A66\">10.75</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}],["match",{"usage":"import { getProjection, setInlineStyles, type PartialProjectionResults } from 'projectrix';\n\nfunction match(subject: HTMLElement, target: HTMLElement): void {\n  const { toSubject } = getProjection(subject, target) as PartialProjectionResults;\n  delete toSubject.borderStyle; // preserve target border style\n\n  setInlineStyles(target, toSubject);\n}\n","code":"<script lang=\"ts\">\n  import type { Options } from '$lib/options';\n  import { getProjection, setInlineStyles, type PartialProjectionResults } from 'projectrix';\n  import { onMount, tick } from 'svelte';\n  import type { Writable } from 'svelte/store';\n  import type DemoStartSlot from '../DemoStartSlot.svelte';\n\n  // start slot and options are part of demos infrastructure\n  export let startSlot: DemoStartSlot;\n  export let options: Writable<Options>;\n  $: log = $options.log;\n\n  let target: HTMLElement;\n\n  onMount(async () => {\n    await tick();\n    startSlot.show();\n  });\n\n  function match(subject: HTMLElement, target: HTMLElement): void {\n    if (startSlot.isShowing()) {\n      startSlot.hide();\n      target.style.opacity = '1';\n    }\n\n    const { toSubject } = getProjection(subject, target, { log }) as PartialProjectionResults;\n    delete toSubject.borderStyle; // preserve target border style\n\n    setInlineStyles(target, toSubject);\n  }\n\n  function subjectClickHandler(subject: HTMLElement): void {\n    match(subject, target);\n  }\n</script>\n\n<div class=\"size-container\">\n  <div class=\"subject-flex\">\n    <button class=\"demo-subject\" on:click={(e) => subjectClickHandler(e.currentTarget)} />\n    <button class=\"demo-subject rotated\" on:click={(e) => subjectClickHandler(e.currentTarget)} />\n    <button class=\"demo-subject parent\" on:click={(e) => subjectClickHandler(e.currentTarget)}>\n      <button\n        class=\"demo-subject child\"\n        on:click|stopPropagation={(e) => subjectClickHandler(e.currentTarget)}\n      />\n    </button>\n  </div>\n</div>\n\n<div bind:this={target} class=\"demo-target\" />\n\n<style lang=\"scss\">\n  button {\n    all: unset;\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  .demo-subject:focus-visible,\n  .parent:focus-visible {\n    outline: solid 2px white;\n    outline-offset: 4px;\n  }\n\n  .demo-target {\n    // any positioning works with Projectrix\n    position: absolute;\n\n    // last i checked, safari webkit can't handle non-integer borders\n    // on transformed elements, so i always recommend pixels for borders\n    border: solid 3px limegreen;\n\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  .size-container {\n    position: relative;\n    width: 100%;\n    aspect-ratio: 4 / 1;\n    margin-top: 1.5em;\n\n    container-type: size;\n  }\n\n  .subject-flex {\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    gap: 10cqw;\n  }\n\n  .demo-subject {\n    width: 14.25cqw;\n    height: 14.25cqw;\n    border: dashed 3px yellow;\n\n    cursor: pointer;\n  }\n\n  .rotated {\n    transform: rotate(45deg);\n  }\n\n  .parent {\n    width: 21cqw;\n    height: 21cqw;\n    border-color: darkmagenta;\n\n    transform: skew(-15deg);\n\n    .child {\n      position: absolute;\n      top: 0px;\n      left: 0px;\n\n      width: 10.75cqw;\n      height: 10.75cqw;\n    }\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> match</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  delete</span><span style=\"color:#E5C07B\"> toSubject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderStyle</span><span style=\"color:#ABB2BF\">; </span><span style=\"color:#7F848E;font-style:italic\">// preserve target border style</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span>\n<span class=\"line\"></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Options</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/options'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Writable</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte/store'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#E06C75\"> DemoStartSlot</span><span style=\"color:#C678DD\"> from</span><span style=\"color:#98C379\"> '../DemoStartSlot.svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // start slot and options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  export</span><span style=\"color:#C678DD\"> let</span><span style=\"color:#E06C75\"> startSlot</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">DemoStartSlot</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  export</span><span style=\"color:#C678DD\"> let</span><span style=\"color:#E06C75\"> options</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Writable</span><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E5C07B\">Options</span><span style=\"color:#ABB2BF\">>;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  $</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">show</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> match</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">isShowing</span><span style=\"color:#ABB2BF\">()) {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">hide</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> }) </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    delete</span><span style=\"color:#E5C07B\"> toSubject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderStyle</span><span style=\"color:#ABB2BF\">; </span><span style=\"color:#7F848E;font-style:italic\">// preserve target border style</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    match</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"size-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"subject-flex\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject\"</span><span style=\"color:#C678DD\"> on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">click</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject rotated\"</span><span style=\"color:#C678DD\"> on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">click</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject parent\"</span><span style=\"color:#C678DD\"> on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">click</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject child\"</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">click</span><span style=\"color:#ABB2BF\">|</span><span style=\"color:#56B6C2\">stopPropagation</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">target</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  button</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    all: </span><span style=\"color:#D19A66\">unset</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#56B6C2\">    -webkit-tap-highlight-color</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">transparent</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .demo-subject</span><span style=\"color:#56B6C2\">:focus-visible</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .parent</span><span style=\"color:#56B6C2\">:focus-visible</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 2</span><span style=\"color:#E06C75\">px</span><span style=\"color:#D19A66\"> white</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-offset: </span><span style=\"color:#D19A66\">4</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .demo-target</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // any positioning works with Projectrix</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">absolute</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // last i checked, safari webkit can't handle non-integer borders</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // on transformed elements, so i always recommend pixels for borders</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\"> limegreen;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    pointer-events: </span><span style=\"color:#D19A66\">none</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .size-container</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">relative</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    aspect-ratio: </span><span style=\"color:#D19A66\">4</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    margin-top: </span><span style=\"color:#D19A66\">1.5</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: size;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .subject-flex</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: </span><span style=\"color:#D19A66\">flex</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    gap: </span><span style=\"color:#D19A66\">10</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .demo-subject</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">14.25</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">14.25</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: </span><span style=\"color:#D19A66\">dashed</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#D19A66\"> yellow</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    cursor</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">pointer</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .rotated</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">45</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .parent</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">21</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">21</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-color: darkmagenta;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">skew</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">-15</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">    .child</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      position: </span><span style=\"color:#D19A66\">absolute</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      top: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      left: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      width: </span><span style=\"color:#D19A66\">10.75</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      height: </span><span style=\"color:#D19A66\">10.75</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}],["divGolf",{"usage":"import { getProjection, setInlineStyles } from 'projectrix';\n\nlet currentTarget: HTMLElement;\n\n// each modifier contains a unique green target. match the next target to\n// the current target and swap their opacities to create the illusion of\n// a single green target being passed between the modifiers\nfunction moveCurrentTargetToModifier(modifier: HTMLElement): void {\n  const nextTarget = modifier.firstElementChild as HTMLElement;\n  if (currentTarget.isSameNode(nextTarget)) return;\n\n  // match next target to current target's projection\n  const { toSubject } = getProjection(currentTarget, nextTarget);\n  setInlineStyles(nextTarget, toSubject);\n\n  // swap targets\n  currentTarget.style.opacity = '0';\n  nextTarget.style.opacity = '1';\n  currentTarget = nextTarget;\n}","code":"<script lang=\"ts\">\n  import { onDestroy, onMount, tick } from 'svelte';\n  import { mat4, quat, vec3 } from 'gl-matrix';\n  import { getProjection, measureSubject, setInlineStyles, type Measurement } from 'projectrix';\n  import anime from 'animejs';\n  import type { Writable } from 'svelte/store';\n  import type { Options } from '$lib/options';\n\n  // options are part of demos infrastructure\n  export let options: Writable<Options>;\n  $: log = $options.log;\n\n  const NumGoals = 5;\n  let goals: HTMLElement[] = [];\n\n  let startTarget: HTMLElement;\n  let hitTarget: HTMLElement;\n\n  let spinnerModifier: HTMLElement;\n  let slider1Modifier: HTMLElement;\n  let slider2Modifier: HTMLElement;\n\n  let pulseContainer: HTMLElement;\n  let pulseTemplate: HTMLElement;\n\n  /* game state */\n\n  let currentTarget: HTMLElement | null;\n  let currentModifier: HTMLElement | null;\n  let hitAnim: anime.AnimeInstance | undefined;\n\n  let startTime = 0;\n  let timer = 0;\n  let timerInterval: NodeJS.Timeout | undefined;\n\n  let moves = 0;\n  const goalsCompleted = new Set<HTMLElement>();\n  let courseCompleted = false;\n\n  onMount(async () => {\n    await tick();\n    reset();\n  });\n\n  onDestroy(() => {\n    clearTimer();\n  });\n\n  /* game state management */\n\n  function reset(): void {\n    clearTimer();\n    moves = 0;\n    courseCompleted = false;\n    goals.forEach((goal) => {\n      goal.style.borderStyle = 'solid';\n      goal.style.borderColor = '#f00';\n    });\n    goalsCompleted.clear();\n\n    restart();\n  }\n\n  function restart(): void {\n    currentModifier = null;\n    setCurrentTarget(startTarget);\n    startModifiers();\n  }\n\n  function clearTimer(): void {\n    clearInterval(timerInterval);\n    timer = 0;\n  }\n\n  function startTimer(): void {\n    startTime = Date.now();\n    timerInterval = setInterval(() => {\n      timer = Math.floor((Date.now() - startTime) / 1000);\n    }, 1000);\n  }\n\n  function countMove(): void {\n    if (courseCompleted) {\n      return;\n    }\n    if (moves === 0) {\n      startTimer();\n    }\n    moves++;\n  }\n\n  function styleGoalCompleted(goal: HTMLElement): void {\n    goal.style.borderStyle = 'dotted';\n    goal.style.borderColor = '#32cd32';\n  }\n\n  function markGoalCompleted(goal: HTMLElement): void {\n    goalsCompleted.add(goal);\n    checkCourseCompleted();\n  }\n\n  function checkCourseCompleted(): void {\n    if (courseCompleted) {\n      return;\n    }\n    if (goalsCompleted.size === NumGoals) {\n      markCourseCompleted();\n    }\n  }\n\n  function markCourseCompleted(): void {\n    courseCompleted = true;\n    clearInterval(timerInterval);\n    timer = (Date.now() - startTime) / 1000;\n  }\n\n  function startModifiers(): void {\n    anime.set(spinnerModifier, {\n      rotate: '0deg',\n    });\n    anime({\n      targets: spinnerModifier,\n      duration: 3000,\n      easing: 'linear',\n      loop: true,\n\n      rotate: '-360deg',\n    });\n\n    anime.set(slider1Modifier, {\n      rotate: '-45deg',\n      translateX: '0px',\n    });\n    anime.set(slider2Modifier, {\n      rotate: '225deg',\n      translateX: '0px',\n    });\n    const sliderAnimParams = {\n      easing: 'linear',\n      loop: true,\n      direction: 'alternate',\n\n      translateX: '170px',\n    };\n    anime({\n      targets: slider1Modifier,\n      duration: 1400,\n\n      ...sliderAnimParams,\n    });\n    anime({\n      targets: slider2Modifier,\n      duration: 700,\n\n      ...sliderAnimParams,\n    });\n  }\n\n  function activateModifier(modifier: HTMLElement): void {\n    if (hitAnim) return;\n    if (!currentTarget) return;\n\n    animateClonedpulse(currentTarget);\n\n    if (modifier.isSameNode(currentModifier)) {\n      attemptAllgoals();\n      return;\n    }\n\n    moveToModifier(modifier);\n  }\n\n  // match modifier's target to current target's projection\n  function moveToModifier(modifier: HTMLElement): void {\n    const nextTarget = modifier.firstElementChild as HTMLElement;\n    const { toSubject } = getProjection(currentTarget!, nextTarget, { log });\n    setInlineStyles(nextTarget, toSubject);\n    setCurrentTarget(nextTarget);\n    currentModifier = modifier;\n  }\n\n  function setCurrentTarget(target: HTMLElement): void {\n    if (currentTarget) {\n      currentTarget.style.opacity = '0';\n    }\n    target.style.opacity = '1';\n    currentTarget = target;\n  }\n\n  function attemptAllgoals(): void {\n    const subject = measureSubject(currentTarget!);\n    goals.forEach((goal) => attemptGoalHit(goal, subject, false));\n  }\n\n  function attemptGoalHit(goal: HTMLElement, subject?: Measurement, goalClicked = true): void {\n    subject = subject ?? measureSubject(currentTarget!);\n    const hit = checkIfTolerancesHit(goal, subject);\n\n    if (hit) {\n      currentModifier = null;\n      markGoalCompleted(goal);\n      animateHit(goal);\n    } else if (goalClicked) {\n      animateMiss(goal);\n    }\n  }\n\n  const distanceTolerancePx = 10;\n  const rotationToleranceDeg = 8;\n\n  function checkIfTolerancesHit(goal: HTMLElement, subject: Measurement): boolean {\n    const { toSubject, toTargetOrigin } = getProjection(subject, goal, {\n      transformType: 'transformMat4',\n    });\n\n    const basisToOrigin = toTargetOrigin.transformMat4 as mat4;\n    const basisToSubject = toSubject.transformMat4 as mat4;\n\n    const originToBasis = mat4.create();\n    mat4.invert(originToBasis, basisToOrigin);\n\n    const originToSubject = mat4.create();\n    mat4.multiply(originToSubject, originToBasis, basisToSubject);\n\n    const xPx = originToSubject[12];\n    const yPx = originToSubject[13];\n\n    // check distance\n    const distancePx = Math.sqrt(xPx * xPx + yPx * yPx);\n    if (distancePx > distanceTolerancePx) {\n      return false;\n    }\n\n    const rotationQuat = quat.create();\n    mat4.getRotation(rotationQuat, originToSubject);\n\n    const rotationVec3 = vec3.create();\n    const rotationDeg = (quat.getAxisAngle(rotationVec3, rotationQuat) * 180) / Math.PI;\n\n    // check rotation\n    const rotationDeltaDeg = 45 - Math.abs((rotationDeg % 90) - 45);\n    if (rotationDeltaDeg > rotationToleranceDeg) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /* animations */\n\n  function animateHit(goal: HTMLElement): void {\n    // match hit target to current target\n    const { toSubject } = getProjection(currentTarget!, hitTarget, { log });\n    setInlineStyles(hitTarget, toSubject);\n    setCurrentTarget(hitTarget);\n\n    // animate hit target rest of way to goal\n    hitAnim = anime({\n      targets: hitTarget,\n      duration: 300,\n      easing: 'easeOutQuad',\n\n      // anime.js takes matrix3d\n      ...getProjection(goal, hitTarget, { transformType: 'matrix3d', log }).toSubject,\n\n      complete: () => {\n        styleGoalCompleted(goal);\n\n        animateClonedpulse(hitTarget);\n        setTimeout(() => animateClonedpulse(hitTarget), 350);\n        setTimeout(() => animateClonedpulse(hitTarget), 700);\n\n        hitAnim = undefined;\n      },\n    });\n  }\n\n  function animateMiss(goal: HTMLElement): void {\n    goal.style.backgroundColor = 'rgba(255, 0, 0, 1)';\n    anime({\n      targets: goal,\n      duration: 300,\n      easing: 'easeOutQuad',\n\n      backgroundColor: 'rgba(255, 0, 0, 0)',\n    });\n  }\n\n  function animateClonedpulse(subject: HTMLElement): void {\n    const pulseClone = pulseTemplate.cloneNode() as HTMLElement;\n    pulseContainer.append(pulseClone);\n\n    const { toSubject } = getProjection(subject, pulseClone, { log });\n    setInlineStyles(pulseClone, toSubject);\n    pulseClone.style.opacity = '1';\n\n    anime({\n      targets: pulseClone,\n      duration: 300,\n      easing: 'easeOutQuad',\n\n      outlineOffset: '18px',\n      outlineColor: 'rgba(50, 205, 50, 0)',\n\n      complete: () => {\n        pulseClone.remove();\n      },\n    });\n  }\n\n  /* input handling */\n\n  // prevent holding keys down\n  const keysDownBad: Record<string, boolean> = {};\n  function liftKey(key: string): void {\n    keysDownBad[key] = false;\n  }\n  // presses key; returns true if key was already down bad\n  function pressKeyDownBad(key: string): boolean {\n    if (keysDownBad[key]) {\n      return true;\n    }\n    keysDownBad[key] = true;\n    return false;\n  }\n\n  function isEnterKey(key: string): boolean {\n    if (['Enter', ' '].includes(key)) return true;\n    return false;\n  }\n\n  function handleWindowKeyUp(key: string): void {\n    liftKey(key);\n  }\n  function handleWindowKeyDown(key: string): void {\n    if (isEnterKey(key)) {\n      return;\n    }\n    if (pressKeyDownBad(key)) {\n      return;\n    }\n\n    switch (key) {\n      case '1':\n        countMove();\n        activateModifier(spinnerModifier);\n        spinnerModifier.focus();\n        return;\n      case '2':\n        countMove();\n        activateModifier(slider1Modifier);\n        slider1Modifier.focus();\n        return;\n      case '3':\n        countMove();\n        activateModifier(slider2Modifier);\n        slider2Modifier.focus();\n        return;\n      case 'r':\n        restart();\n        return;\n      case 'Delete':\n        reset();\n        return;\n    }\n  }\n\n  function handleModifierTap(e: Event): void {\n    const modifier = e.currentTarget as HTMLElement;\n    countMove();\n    activateModifier(modifier);\n  }\n  function handleModifierKeyDown(e: KeyboardEvent): void {\n    const key = e.key;\n    const modifier = e.currentTarget as HTMLElement;\n    if (!isEnterKey(key)) {\n      return;\n    }\n    if (pressKeyDownBad(key)) {\n      return;\n    }\n\n    countMove();\n    activateModifier(modifier);\n  }\n\n  function handleGoalTap(e: Event): void {\n    countMove();\n    attemptGoalHit(e.currentTarget as HTMLElement);\n  }\n  function handleGoalKeyDown(e: KeyboardEvent): void {\n    const key = e.key;\n    const goal = e.currentTarget as HTMLElement;\n    if (!isEnterKey(key)) {\n      return;\n    }\n    if (pressKeyDownBad(key)) {\n      return;\n    }\n    countMove();\n    attemptGoalHit(goal);\n  }\n\n  function handleRestartClick(): void {\n    countMove();\n    restart();\n  }\n\n  function handleResetClick(): void {\n    reset();\n  }\n</script>\n\n<!-- prettier-ignore -->\n<svelte:window \n  on:keyup={(e) => handleWindowKeyUp(e.key)} \n  on:keydown={(e) => handleWindowKeyDown(e.key)}\n/>\n\n<div class=\"centerer prevent-select disable-touch-zoom\">\n  <div class=\"course-sizer portrait-size-toggle\">\n    <div class=\"course portrait-rotate-toggle\">\n      <button\n        bind:this={goals[0]}\n        class=\"modifier goal goal-0\"\n        on:mousedown={handleGoalTap}\n        on:touchstart|preventDefault={handleGoalTap}\n        on:keydown={handleGoalKeyDown}\n      >\n        <div class=\"golf-target child-target\" />\n      </button>\n\n      <button\n        bind:this={goals[1]}\n        class=\"modifier goal goal-1\"\n        on:mousedown={handleGoalTap}\n        on:touchstart|preventDefault={handleGoalTap}\n        on:keydown={handleGoalKeyDown}\n      >\n        <div class=\"golf-target child-target\" />\n      </button>\n\n      <button\n        bind:this={goals[2]}\n        class=\"modifier goal goal-2\"\n        on:mousedown={handleGoalTap}\n        on:touchstart|preventDefault={handleGoalTap}\n        on:keydown={handleGoalKeyDown}\n      >\n        <div class=\"golf-target child-target\" />\n      </button>\n\n      <button\n        bind:this={goals[3]}\n        class=\"modifier goal goal-3\"\n        on:mousedown={handleGoalTap}\n        on:touchstart|preventDefault={handleGoalTap}\n        on:keydown={handleGoalKeyDown}\n      >\n        <div class=\"golf-target child-target\" />\n      </button>\n\n      <button\n        bind:this={goals[4]}\n        class=\"modifier goal goal-4\"\n        on:mousedown={handleGoalTap}\n        on:touchstart|preventDefault={handleGoalTap}\n        on:keydown={handleGoalKeyDown}\n      >\n        <div class=\"golf-target child-target\" />\n      </button>\n\n      <div bind:this={startTarget} class=\"golf-target start-target\" />\n      <div bind:this={hitTarget} class=\"golf-target hit-target\" />\n\n      <button\n        bind:this={spinnerModifier}\n        class=\"modifier spinner\"\n        class:current={spinnerModifier?.isSameNode(currentModifier)}\n        on:mousedown={handleModifierTap}\n        on:touchstart|preventDefault={handleModifierTap}\n        on:keydown={handleModifierKeyDown}\n      >\n        <div class=\"golf-target child-target\" />\n      </button>\n\n      <button\n        bind:this={slider1Modifier}\n        class=\"modifier slider1\"\n        class:current={slider1Modifier?.isSameNode(currentModifier)}\n        on:mousedown={handleModifierTap}\n        on:touchstart|preventDefault={handleModifierTap}\n        on:keydown={handleModifierKeyDown}\n      >\n        <div class=\"golf-target child-target\" />\n      </button>\n\n      <button\n        bind:this={slider2Modifier}\n        class=\"modifier slider2\"\n        class:current={slider2Modifier?.isSameNode(currentModifier)}\n        on:mousedown={handleModifierTap}\n        on:touchstart|preventDefault={handleModifierTap}\n        on:keydown={handleModifierKeyDown}\n      >\n        <div class=\"golf-target child-target\" />\n      </button>\n    </div>\n  </div>\n</div>\n\n<div bind:this={pulseContainer} class=\"pulse-container\">\n  <div bind:this={pulseTemplate} class=\"golf-target pulse-template\" />\n</div>\n\n<button class=\"restart\" on:click={handleRestartClick}>\n  <span class=\"material-symbols-outlined\"> replay </span>\n</button>\n<div class=\"scores\">\n  <div class=\"tracker score\" class:courseCompleted>\n    <span class=\"material-symbols-outlined\"> sports_score </span>\n    <p>{moves}</p>\n  </div>\n  <div class=\"tracker clock\" class:courseCompleted>\n    <span class=\"material-symbols-outlined\"> timer </span>\n    <p>{timer}s</p>\n  </div>\n\n  <button class=\"reset\" on:click={handleResetClick}>\n    <span class=\"material-symbols-outlined\"> delete </span>\n  </button>\n</div>\n\n<style lang=\"scss\">\n  $pxem: 16;\n\n  button {\n    all: unset;\n    cursor: pointer;\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  .prevent-select {\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  .disable-touch-zoom {\n    touch-action: manipulation;\n  }\n\n  .spinner.current {\n    background-color: rgba(255, 0, 255, 0.15);\n  }\n  .slider1.current,\n  .slider2.current {\n    background-color: rgba(255, 255, 0, 0.4);\n  }\n  .goal:focus-visible,\n  .restart:focus-visible {\n    outline: solid 2px white;\n    outline-offset: 4px;\n  }\n\n  .restart {\n    position: absolute;\n    top: min(4.4em, 16.8cqw);\n    left: 0.8em;\n  }\n\n  .scores {\n    position: absolute;\n    top: 0.5em;\n    right: 1em;\n\n    display: flex;\n    gap: 1.1em;\n    font-weight: 700;\n\n    .tracker {\n      display: flex;\n      align-items: center;\n      gap: 0.1em;\n      flex-direction: column;\n\n      p {\n        margin: 0;\n      }\n    }\n    .tracker.courseCompleted {\n      color: limeGreen;\n    }\n  }\n\n  .centerer {\n    width: 100%;\n\n    display: flex;\n    justify-content: center;\n\n    container-type: inline-size;\n  }\n\n  .course-sizer {\n    position: relative;\n    width: calc(620 / $pxem * 1em);\n    height: calc(270 / $pxem * 1em);\n  }\n\n  .course {\n    width: calc(620 / $pxem * 1em);\n    height: calc(270 / $pxem * 1em);\n    transform-origin: top left;\n  }\n\n  @container (max-width: 613px) {\n    .course-sizer.portrait-size-toggle {\n      width: calc(270 / $pxem * 1em);\n      height: calc(620 / $pxem * 1em);\n    }\n\n    .course.portrait-rotate-toggle {\n      transform: translateX(calc(270 / $pxem * 1em)) rotate(90deg);\n    }\n  }\n\n  .golf-target {\n    position: absolute;\n\n    width: calc(35 / $pxem * 1em);\n    height: calc(35 / $pxem * 1em);\n    border: solid 3px #32cd32;\n    outline: dotted 3px transparent;\n\n    pointer-events: none;\n  }\n\n  .start-target {\n    top: calc(60 / $pxem * 1em);\n    left: calc(10 / $pxem * 1em);\n  }\n\n  .child-target {\n    opacity: 0;\n  }\n\n  .hit-target {\n    opacity: 0;\n    background-color: limegreen;\n  }\n\n  .modifier {\n    position: absolute;\n\n    width: calc(150 / $pxem * 1em);\n    height: calc(150 / $pxem * 1em);\n    border: dashed 3px darkmagenta;\n  }\n  .modifier:focus-visible {\n    outline: solid 2px white;\n    outline-offset: 3px;\n  }\n\n  .spinner {\n    top: calc(70 / $pxem * 1em);\n    left: calc(60 / $pxem * 1em);\n  }\n\n  .slider1,\n  .slider2 {\n    height: calc(50 / $pxem * 1em);\n\n    border-color: yellow;\n  }\n\n  .slider1 {\n    top: calc(160 / $pxem * 1em);\n    left: calc(235 / $pxem * 1em);\n\n    transform: rotate(-45deg);\n  }\n  .slider2 {\n    top: calc(160 / $pxem * 1em);\n    left: calc(479 / $pxem * 1em);\n\n    transform: rotate(225deg);\n  }\n\n  .goal {\n    width: calc(35 / $pxem * 1em);\n    height: calc(35 / $pxem * 1em);\n\n    border-style: solid;\n    border-color: red;\n  }\n  .goal-0 {\n    top: calc(210 / $pxem * 1em);\n    left: calc(415 / $pxem * 1em);\n    transform: rotate(45deg);\n  }\n  .goal-1 {\n    top: calc(57 / $pxem * 1em);\n    left: calc(223 / $pxem * 1em);\n    transform: rotate(24deg);\n  }\n  .goal-2 {\n    top: calc(104 / $pxem * 1em);\n    left: calc(564 / $pxem * 1em);\n    transform: rotate(20deg);\n  }\n  .goal-3 {\n    top: calc(57 / $pxem * 1em);\n    left: calc(559 / $pxem * 1em);\n    transform: rotate(14deg);\n  }\n  .goal-4 {\n    top: calc(11 / $pxem * 1em);\n    left: calc(551 / $pxem * 1em);\n    transform: rotate(9deg);\n  }\n\n  .pulse-template {\n    border-color: transparent;\n    outline: solid 2px transparent;\n    outline-offset: 0px;\n    outline-color: rgba(50, 205, 50, 1);\n    opacity: 0;\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">let</span><span style=\"color:#E06C75\"> currentTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">// each modifier contains a unique green target. match the next target to</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">// the current target and swap their opacities to create the illusion of</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">// a single green target being passed between the modifiers</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> moveCurrentTargetToModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">modifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> nextTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> modifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">firstElementChild</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">currentTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">isSameNode</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">)) </span><span style=\"color:#C678DD\">return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // match next target to current target's projection</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // swap targets</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  currentTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  nextTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  currentTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> nextTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onDestroy</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">mat4</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">quat</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">vec3</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'gl-matrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">measureSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> Measurement</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#E06C75\"> anime</span><span style=\"color:#C678DD\"> from</span><span style=\"color:#98C379\"> 'animejs'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Writable</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte/store'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Options</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/options'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  export</span><span style=\"color:#C678DD\"> let</span><span style=\"color:#E06C75\"> options</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Writable</span><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E5C07B\">Options</span><span style=\"color:#ABB2BF\">>;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  $</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> NumGoals</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 5</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> goals</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">[] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> [];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> startTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> hitTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> spinnerModifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> slider1Modifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> slider2Modifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> pulseContainer</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> pulseTemplate</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  /* game state */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">null</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentModifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">null</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> hitAnim</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">anime</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">AnimeInstance</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> startTime</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> timer</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> timerInterval</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">NodeJS</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">Timeout</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> moves</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> goalsCompleted</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#C678DD\"> new</span><span style=\"color:#61AFEF\"> Set</span><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">>();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> courseCompleted</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    reset</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onDestroy</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearTimer</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  /* game state management */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> reset</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearTimer</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    moves</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    courseCompleted</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goals</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">forEach</span><span style=\"color:#ABB2BF\">((</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      goal</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderStyle</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> 'solid'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      goal</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderColor</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '#f00'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goalsCompleted</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">clear</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    restart</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> restart</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentModifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> null</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setCurrentTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">startTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    startModifiers</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> clearTimer</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearInterval</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">timerInterval</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    timer</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> startTimer</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    startTime</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> Date</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">now</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    timerInterval</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> setInterval</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      timer</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> Math</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">floor</span><span style=\"color:#ABB2BF\">((</span><span style=\"color:#E5C07B\">Date</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">now</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#56B6C2\">-</span><span style=\"color:#E06C75\"> startTime</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">/</span><span style=\"color:#D19A66\"> 1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }, </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> countMove</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">courseCompleted</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">moves</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#D19A66\"> 0</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      startTimer</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    moves</span><span style=\"color:#56B6C2\">++</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> styleGoalCompleted</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goal</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderStyle</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> 'dotted'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goal</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderColor</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '#32cd32'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> markGoalCompleted</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goalsCompleted</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">add</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    checkCourseCompleted</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> checkCourseCompleted</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">courseCompleted</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">goalsCompleted</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">size</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#E06C75\"> NumGoals</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      markCourseCompleted</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> markCourseCompleted</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    courseCompleted</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearInterval</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">timerInterval</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    timer</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">Date</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">now</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#56B6C2\">-</span><span style=\"color:#E06C75\"> startTime</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">/</span><span style=\"color:#D19A66\"> 1000</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> startModifiers</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    anime</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">spinnerModifier</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      rotate</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'0deg'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    anime</span><span style=\"color:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      targets</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">spinnerModifier</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">3000</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      loop</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">true</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      rotate</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'-360deg'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    anime</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">slider1Modifier</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      rotate</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'-45deg'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      translateX</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'0px'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    anime</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">slider2Modifier</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      rotate</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'225deg'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      translateX</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'0px'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> sliderAnimParams</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      loop</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">true</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      direction</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'alternate'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      translateX</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'170px'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    };</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    anime</span><span style=\"color:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      targets</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">slider1Modifier</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1400</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">sliderAnimParams</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    anime</span><span style=\"color:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      targets</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">slider2Modifier</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">700</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">sliderAnimParams</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">modifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">hitAnim</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animateClonedpulse</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">modifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">isSameNode</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentModifier</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      attemptAllgoals</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    moveToModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">modifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // match modifier's target to current target's projection</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> moveToModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">modifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> nextTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> modifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">firstElementChild</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> });</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setCurrentTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentModifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> modifier</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> setCurrentTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      currentTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> target</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> attemptAllgoals</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> subject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> measureSubject</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goals</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">forEach</span><span style=\"color:#ABB2BF\">((</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> attemptGoalHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">false</span><span style=\"color:#ABB2BF\">));</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> attemptGoalHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#C678DD\">?</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Measurement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">goalClicked</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    subject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> subject</span><span style=\"color:#56B6C2\"> ??</span><span style=\"color:#61AFEF\"> measureSubject</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> hit</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> checkIfTolerancesHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">hit</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      currentModifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> null</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      markGoalCompleted</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      animateHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    } </span><span style=\"color:#C678DD\">else</span><span style=\"color:#C678DD\"> if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">goalClicked</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      animateMiss</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> distanceTolerancePx</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 10</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> rotationToleranceDeg</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 8</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> checkIfTolerancesHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Measurement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">boolean</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      transformType</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'transformMat4'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> basisToOrigin</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> toTargetOrigin</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">transformMat4</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> mat4</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> basisToSubject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> toSubject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">transformMat4</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> mat4</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> originToBasis</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> mat4</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">create</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    mat4</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">invert</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">originToBasis</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">basisToOrigin</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> originToSubject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> mat4</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">create</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    mat4</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">multiply</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">originToSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">originToBasis</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">basisToSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> xPx</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> originToSubject</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">12</span><span style=\"color:#ABB2BF\">];</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> yPx</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> originToSubject</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">13</span><span style=\"color:#ABB2BF\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // check distance</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> distancePx</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> Math</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">sqrt</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">xPx</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> xPx</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#E06C75\"> yPx</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> yPx</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">distancePx</span><span style=\"color:#56B6C2\"> ></span><span style=\"color:#E06C75\"> distanceTolerancePx</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> rotationQuat</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> quat</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">create</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    mat4</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">getRotation</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">rotationQuat</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">originToSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> rotationVec3</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> vec3</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">create</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> rotationDeg</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">quat</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">getAxisAngle</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">rotationVec3</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">rotationQuat</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">*</span><span style=\"color:#D19A66\"> 180</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">/</span><span style=\"color:#E5C07B\"> Math</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">PI</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // check rotation</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> rotationDeltaDeg</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 45</span><span style=\"color:#56B6C2\"> -</span><span style=\"color:#E5C07B\"> Math</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">abs</span><span style=\"color:#ABB2BF\">((</span><span style=\"color:#E06C75\">rotationDeg</span><span style=\"color:#56B6C2\"> %</span><span style=\"color:#D19A66\"> 90</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">-</span><span style=\"color:#D19A66\"> 45</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">rotationDeltaDeg</span><span style=\"color:#56B6C2\"> ></span><span style=\"color:#E06C75\"> rotationToleranceDeg</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  /* animations */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> animateHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // match hit target to current target</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> });</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setCurrentTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // animate hit target rest of way to goal</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    hitAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> anime</span><span style=\"color:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      targets</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">300</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'easeOutQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">      // anime.js takes matrix3d</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#61AFEF\">getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">transformType</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'matrix3d'</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> }).</span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      complete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        styleGoalCompleted</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        animateClonedpulse</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> animateClonedpulse</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">), </span><span style=\"color:#D19A66\">350</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> animateClonedpulse</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">), </span><span style=\"color:#D19A66\">700</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        hitAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> animateMiss</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goal</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">backgroundColor</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> 'rgba(255, 0, 0, 1)'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    anime</span><span style=\"color:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      targets</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">300</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'easeOutQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      backgroundColor</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'rgba(255, 0, 0, 0)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> animateClonedpulse</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> pulseClone</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> pulseTemplate</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">cloneNode</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    pulseContainer</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">append</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">pulseClone</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">pulseClone</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> });</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">pulseClone</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    pulseClone</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    anime</span><span style=\"color:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      targets</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">pulseClone</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">300</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'easeOutQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      outlineOffset</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'18px'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      outlineColor</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'rgba(50, 205, 50, 0)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      complete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">        pulseClone</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">remove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  /* input handling */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // prevent holding keys down</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> keysDownBad</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Record</span><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">boolean</span><span style=\"color:#ABB2BF\">> </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> {};</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> liftKey</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">key</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    keysDownBad</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // presses key; returns true if key was already down bad</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> pressKeyDownBad</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">key</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">boolean</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">keysDownBad</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">]) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    keysDownBad</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> isEnterKey</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">key</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">boolean</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> ([</span><span style=\"color:#98C379\">'Enter'</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#98C379\">' '</span><span style=\"color:#ABB2BF\">].</span><span style=\"color:#61AFEF\">includes</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) </span><span style=\"color:#C678DD\">return</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleWindowKeyUp</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">key</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    liftKey</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleWindowKeyDown</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">key</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#61AFEF\">isEnterKey</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#61AFEF\">pressKeyDownBad</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    switch</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      case</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">spinnerModifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">        spinnerModifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">focus</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      case</span><span style=\"color:#98C379\"> '2'</span><span style=\"color:#ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">slider1Modifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">        slider1Modifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">focus</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      case</span><span style=\"color:#98C379\"> '3'</span><span style=\"color:#ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">slider2Modifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">        slider2Modifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">focus</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      case</span><span style=\"color:#98C379\"> 'r'</span><span style=\"color:#ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        restart</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      case</span><span style=\"color:#98C379\"> 'Delete'</span><span style=\"color:#ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        reset</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleModifierTap</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Event</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> modifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">modifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleModifierKeyDown</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">KeyboardEvent</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> key</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> modifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#61AFEF\">isEnterKey</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#61AFEF\">pressKeyDownBad</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">modifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleGoalTap</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Event</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    attemptGoalHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleGoalKeyDown</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">KeyboardEvent</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> key</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> goal</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#61AFEF\">isEnterKey</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#61AFEF\">pressKeyDownBad</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    attemptGoalHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleRestartClick</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    restart</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleResetClick</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    reset</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">&#x3C;!-- prettier-ignore --></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#C678DD\">svelte</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E06C75\">window</span><span style=\"color:#ABB2BF\"> </span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">keyup</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> handleWindowKeyUp</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\"> </span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">keydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> handleWindowKeyDown</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">/></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"centerer prevent-select disable-touch-zoom\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"course-sizer portrait-size-toggle\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"course portrait-rotate-toggle\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">goals</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">]</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier goal goal-0\"</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">mousedown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">touchstart</span><span style=\"color:#ABB2BF\">|</span><span style=\"color:#56B6C2\">preventDefault</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">keydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalKeyDown</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">goals</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">]</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier goal goal-1\"</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">mousedown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">touchstart</span><span style=\"color:#ABB2BF\">|</span><span style=\"color:#56B6C2\">preventDefault</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">keydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalKeyDown</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">goals</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">2</span><span style=\"color:#ABB2BF\">]</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier goal goal-2\"</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">mousedown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">touchstart</span><span style=\"color:#ABB2BF\">|</span><span style=\"color:#56B6C2\">preventDefault</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">keydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalKeyDown</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">goals</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">3</span><span style=\"color:#ABB2BF\">]</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier goal goal-3\"</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">mousedown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">touchstart</span><span style=\"color:#ABB2BF\">|</span><span style=\"color:#56B6C2\">preventDefault</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">keydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalKeyDown</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">goals</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">4</span><span style=\"color:#ABB2BF\">]</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier goal goal-4\"</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">mousedown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">touchstart</span><span style=\"color:#ABB2BF\">|</span><span style=\"color:#56B6C2\">preventDefault</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">keydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleGoalKeyDown</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">startTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target start-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target hit-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">spinnerModifier</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier spinner\"</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#D19A66\">current</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E5C07B\">spinnerModifier</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">isSameNode</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentModifier</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">mousedown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">touchstart</span><span style=\"color:#ABB2BF\">|</span><span style=\"color:#56B6C2\">preventDefault</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">keydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierKeyDown</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">slider1Modifier</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier slider1\"</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#D19A66\">current</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E5C07B\">slider1Modifier</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">isSameNode</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentModifier</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">mousedown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">touchstart</span><span style=\"color:#ABB2BF\">|</span><span style=\"color:#56B6C2\">preventDefault</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">keydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierKeyDown</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">slider2Modifier</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier slider2\"</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#D19A66\">current</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E5C07B\">slider2Modifier</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">isSameNode</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentModifier</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">mousedown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">touchstart</span><span style=\"color:#ABB2BF\">|</span><span style=\"color:#56B6C2\">preventDefault</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">keydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierKeyDown</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">pulseContainer</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"pulse-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">pulseTemplate</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target pulse-template\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"restart\"</span><span style=\"color:#C678DD\"> on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">click</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleRestartClick</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"material-symbols-outlined\"</span><span style=\"color:#ABB2BF\">> replay &#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scores\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"tracker score\"</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E06C75;font-style:italic\">courseCompleted</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"material-symbols-outlined\"</span><span style=\"color:#ABB2BF\">> sports_score &#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">p</span><span style=\"color:#ABB2BF\">></span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">moves</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">p</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"tracker clock\"</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E06C75;font-style:italic\">courseCompleted</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"material-symbols-outlined\"</span><span style=\"color:#ABB2BF\">> timer &#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">p</span><span style=\"color:#ABB2BF\">></span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">timer</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\">s&#x3C;/</span><span style=\"color:#E06C75\">p</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"reset\"</span><span style=\"color:#C678DD\"> on</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">click</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleResetClick</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"material-symbols-outlined\"</span><span style=\"color:#ABB2BF\">> delete &#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  $pxem</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">16</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  button</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    all: </span><span style=\"color:#D19A66\">unset</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    cursor</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">pointer</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#56B6C2\">    -webkit-tap-highlight-color</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">transparent</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .prevent-select</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#56B6C2\">    -webkit-user-select</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">none</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#56B6C2\">    -ms-user-select</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">none</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    user-select: </span><span style=\"color:#D19A66\">none</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .disable-touch-zoom</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    touch-action: </span><span style=\"color:#D19A66\">manipulation</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .spinner.current</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    background-color: </span><span style=\"color:#56B6C2\">rgba</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">255</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">255</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">0.15</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .slider1.current</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .slider2.current</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    background-color: </span><span style=\"color:#56B6C2\">rgba</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">255</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">255</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">0.4</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .goal</span><span style=\"color:#56B6C2\">:focus-visible</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .restart</span><span style=\"color:#56B6C2\">:focus-visible</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 2</span><span style=\"color:#E06C75\">px</span><span style=\"color:#D19A66\"> white</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-offset: </span><span style=\"color:#D19A66\">4</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .restart</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">absolute</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: </span><span style=\"color:#56B6C2\">min</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">4.4</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">16.8</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: </span><span style=\"color:#D19A66\">0.8</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .scores</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">absolute</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: </span><span style=\"color:#D19A66\">0.5</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    right: </span><span style=\"color:#D19A66\">1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: </span><span style=\"color:#D19A66\">flex</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    gap: </span><span style=\"color:#D19A66\">1.1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    font-weight: </span><span style=\"color:#D19A66\">700</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">    .tracker</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      display: </span><span style=\"color:#D19A66\">flex</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      align-items: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      gap: </span><span style=\"color:#D19A66\">0.1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      flex-direction: </span><span style=\"color:#D19A66\">column</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      p</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        margin: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">    .tracker.courseCompleted</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      color: limeGreen;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .centerer</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: </span><span style=\"color:#D19A66\">flex</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: inline-size;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .course-sizer</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">relative</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">620</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">270</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .course</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">620</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">270</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-origin: </span><span style=\"color:#D19A66\">top</span><span style=\"color:#D19A66\"> left</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  @container (max-width: 613px) {</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">    .course-sizer.portrait-size-toggle</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      width: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">270</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      height: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">620</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">    .course.portrait-rotate-toggle</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      transform: </span><span style=\"color:#56B6C2\">translateX</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">270</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">)) </span><span style=\"color:#56B6C2\">rotate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">90</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .golf-target</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">absolute</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">35</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">35</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#D19A66\"> #32cd32</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: </span><span style=\"color:#D19A66\">dotted</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#D19A66\"> transparent</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    pointer-events: </span><span style=\"color:#D19A66\">none</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .start-target</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">60</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">10</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .child-target</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .hit-target</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    background-color: limegreen;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .modifier</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">absolute</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">150</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">150</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: </span><span style=\"color:#D19A66\">dashed</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\"> darkmagenta;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .modifier</span><span style=\"color:#56B6C2\">:focus-visible</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 2</span><span style=\"color:#E06C75\">px</span><span style=\"color:#D19A66\"> white</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-offset: </span><span style=\"color:#D19A66\">3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .spinner</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">70</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">60</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .slider1</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .slider2</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">50</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-color: </span><span style=\"color:#D19A66\">yellow</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .slider1</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">160</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">235</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">-45</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .slider2</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">160</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">479</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">225</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .goal</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">35</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">35</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-style: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-color: </span><span style=\"color:#D19A66\">red</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .goal-0</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">210</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">415</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">45</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .goal-1</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">57</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">223</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">24</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .goal-2</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">104</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">564</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">20</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .goal-3</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">57</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">559</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">14</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .goal-4</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">11</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: </span><span style=\"color:#56B6C2\">calc</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">551</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#E06C75\"> $pxem</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">9</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .pulse-template</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-color: </span><span style=\"color:#D19A66\">transparent</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 2</span><span style=\"color:#E06C75\">px</span><span style=\"color:#D19A66\"> transparent</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-offset: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-color: </span><span style=\"color:#56B6C2\">rgba</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">50</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">205</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">50</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}],["flipCoexist",{"usage":"import { getProjection, setInlineStyles, clearInlineStyles } from 'projectrix';\nimport { animate } from 'motion';\n\nfunction flipCoexist(subject: HTMLElement, target: HTMLElement): void {\n  const { toSubject, toTargetOrigin } = getProjection(subject, target);\n\n  // set target to subject's projection\n  setInlineStyles(target, toSubject);\n  target.style.opacity = '1';\n  subject.style.opacity = '0';\n\n  // FLIP back to origin\n  const flipAnimation = animate(\n    target,\n    { ...toTargetOrigin },\n    {\n      duration: 1,\n      easing: 'ease-out',\n    },\n  );\n\n  // clear inline styles once they're redundant\n  flipAnimation.finished.then(() => clearInlineStyles(target, toTargetOrigin));\n}\n","code":"<script lang=\"ts\">\n  import { onDestroy, onMount, tick } from 'svelte';\n  import { getProjection, clearInlineStyles, setInlineStyles } from 'projectrix';\n  import { animate, type AnimationControls } from 'motion';\n  import type { Writable } from 'svelte/store';\n  import type { Options } from '$lib/options';\n  import type DemoStartSlot from '../DemoStartSlot.svelte';\n\n  // start slot and options are part of demos infrastructure\n  export let startSlot: DemoStartSlot;\n  export let options: Writable<Options>;\n  $: log = $options.log;\n\n  let leftParent: HTMLElement;\n  let rightParent: HTMLElement;\n  let leftChildTarget: HTMLElement;\n  let rightChildTarget: HTMLElement;\n\n  let currentTarget: HTMLElement | undefined;\n  let currentAnim: AnimationControls | undefined;\n  let currentTimeout: NodeJS.Timeout | undefined;\n\n  onMount(async () => {\n    await tick();\n    startSlot.show();\n\n    currentTimeout = setTimeout(() => {\n      startSlot.hide();\n      currentTarget = startSlot.getSlotSubject();\n      flipToRightTarget();\n    }, 1000);\n  });\n\n  onDestroy(() => {\n    currentTarget = undefined;\n\n    currentAnim?.stop();\n    currentAnim = undefined;\n\n    clearTimeout(currentTimeout);\n    currentTimeout = undefined;\n  });\n\n  function flipToLeftTarget(): void {\n    flipToTarget(leftChildTarget, leftParent, 1, flipToRightTarget);\n  }\n\n  function flipToRightTarget(): void {\n    flipToTarget(rightChildTarget, rightParent, -1, flipToLeftTarget);\n  }\n\n  function flipToTarget(\n    nextTarget: HTMLElement,\n    nextParent: HTMLElement,\n    dir: number,\n    nextFlip: () => void,\n  ): void {\n    if (!currentTarget) return;\n\n    const { toSubject, toTargetOrigin } = getProjection(currentTarget, nextTarget, { log });\n\n    // set next target to current target's projection\n    setInlineStyles(nextTarget, toSubject);\n    nextTarget.style.opacity = '1';\n    currentTarget.style.opacity = '0';\n    currentTarget = nextTarget;\n\n    // FLIP next target back to its origin\n    currentAnim = animate(\n      nextTarget,\n      {\n        ...toTargetOrigin,\n      },\n      {\n        duration: 1,\n        easing: 'ease-out',\n      },\n    );\n\n    currentAnim.finished.then(() => {\n      clearInlineStyles(nextTarget);\n\n      playParentAnimation(nextParent, dir).finished.then(() => {\n        currentTimeout = setTimeout(() => {\n          nextFlip();\n        }, 1000);\n      });\n    });\n  }\n\n  function playParentAnimation(parent: HTMLElement, dir: number): AnimationControls {\n    currentAnim = animate(\n      parent,\n      {\n        transform: [\n          'skew(' + 15 * dir + 'deg)',\n          'skew(' + 15 * dir + 'deg) rotate(' + -20 * dir + 'deg)',\n          'skew(' + 15 * dir + 'deg) rotate(' + 20 * dir + 'deg)',\n          'skew(' + 15 * dir + 'deg)',\n        ],\n      },\n      {\n        duration: 1,\n        easing: 'ease-in-out',\n      },\n    );\n\n    return currentAnim;\n  }\n</script>\n\n<div class=\"size-container\">\n  <div class=\"parents-container\">\n    <div bind:this={leftParent} class=\"parent left\">\n      <div bind:this={leftChildTarget} class=\"demo-target child\" />\n    </div>\n\n    <div bind:this={rightParent} class=\"parent right\">\n      <div bind:this={rightChildTarget} class=\"demo-target child\" />\n    </div>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .size-container {\n    position: relative;\n    width: 100%;\n    aspect-ratio: 4 / 1;\n    margin-top: 1.5em;\n\n    container-type: size;\n  }\n\n  .parents-container {\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    gap: 25cqw;\n  }\n\n  .parent {\n    width: 21cqw;\n    height: 21cqw;\n    border: dashed 3px darkmagenta;\n\n    will-change: transform;\n\n    .demo-target {\n      position: absolute;\n      top: 0px;\n      left: 0px;\n\n      width: 10.75cqw;\n      height: 10.75cqw;\n\n      // last i checked, safari webkit can't handle non-integer borders\n      // on transformed elements, so i always recommend pixels for borders\n      border: solid 3px limegreen;\n\n      opacity: 0;\n    }\n  }\n  .left {\n    transform: skew(15deg);\n  }\n  .right {\n    transform: skew(-15deg);\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'motion'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> flipCoexist</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // set target to subject's projection</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  subject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // FLIP back to origin</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> flipAnimation</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    target</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    { ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'ease-out'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  );</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // clear inline styles once they're redundant</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  flipAnimation</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">finished</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\">));</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span>\n<span class=\"line\"></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onDestroy</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> AnimationControls</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'motion'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Writable</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte/store'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Options</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/options'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#E06C75\"> DemoStartSlot</span><span style=\"color:#C678DD\"> from</span><span style=\"color:#98C379\"> '../DemoStartSlot.svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // start slot and options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  export</span><span style=\"color:#C678DD\"> let</span><span style=\"color:#E06C75\"> startSlot</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">DemoStartSlot</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  export</span><span style=\"color:#C678DD\"> let</span><span style=\"color:#E06C75\"> options</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Writable</span><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E5C07B\">Options</span><span style=\"color:#ABB2BF\">>;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  $</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftParent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftChildTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightChildTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentAnim</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">AnimationControls</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentTimeout</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">NodeJS</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">Timeout</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">show</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentTimeout</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">hide</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      currentTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">getSlotSubject</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      flipToRightTarget</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }, </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onDestroy</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">stop</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearTimeout</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTimeout</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentTimeout</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> flipToLeftTarget</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    flipToTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">leftChildTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">leftParent</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">flipToRightTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> flipToRightTarget</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    flipToTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">rightChildTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">rightParent</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#56B6C2\">-</span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">flipToLeftTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> flipToTarget</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">    nextTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">    nextParent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75;font-style:italic\">    dir</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">number</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    nextFlip</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#E5C07B\"> void</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  ): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // set next target to current target's projection</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    nextTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> nextTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // FLIP next target back to its origin</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      nextTarget</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'ease-out'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    );</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">finished</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      playParentAnimation</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextParent</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">dir</span><span style=\"color:#ABB2BF\">).</span><span style=\"color:#E5C07B\">finished</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        currentTimeout</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">          nextFlip</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        }, </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> playParentAnimation</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">parent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">dir</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">number</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">AnimationControls</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      parent</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        transform</span><span style=\"color:#ABB2BF\">: [</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">          'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">          'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg) rotate('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#56B6C2\"> -</span><span style=\"color:#D19A66\">20</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">          'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg) rotate('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 20</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">          'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        ],</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'ease-in-out'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    );</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#E06C75\"> currentAnim</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"size-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parents-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftParent</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parent left\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftChildTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-target child\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightParent</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parent right\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightChildTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-target child\"</span><span style=\"color:#ABB2BF\"> /></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .size-container</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">relative</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    aspect-ratio: </span><span style=\"color:#D19A66\">4</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    margin-top: </span><span style=\"color:#D19A66\">1.5</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: size;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .parents-container</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: </span><span style=\"color:#D19A66\">flex</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    gap: </span><span style=\"color:#D19A66\">25</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .parent</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">21</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">21</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: </span><span style=\"color:#D19A66\">dashed</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\"> darkmagenta;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    will-change: transform;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">    .demo-target</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      position: </span><span style=\"color:#D19A66\">absolute</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      top: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      left: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      width: </span><span style=\"color:#D19A66\">10.75</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      height: </span><span style=\"color:#D19A66\">10.75</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">      // last i checked, safari webkit can't handle non-integer borders</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">      // on transformed elements, so i always recommend pixels for borders</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      border: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\"> limegreen;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      opacity: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .left</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">skew</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">15</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .right</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">skew</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">-15</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}],["cssIsAwesome",{"usage":"import { getProjection, setInlineStyles, clearInlineStyles } from 'projectrix';\nimport { animate } from 'motion';\n\nlet currentSide: 'left' | 'right' = 'left';\n\nfunction flipFromCurrentSide(): void {\n  const subject = currentSide === 'left' ? leftTarget : rightTarget;\n  const target = currentSide === 'left' ? rightTarget : leftTarget;\n  const { toSubject, toTargetOrigin } = getProjection(subject, target);\n\n  setInlineStyles(target, toSubject);\n  subject.style.opacity = '0';\n  target.style.opacity = '1';\n\n  const flipAnim = animate(\n    target,\n    { ...toTargetOrigin },\n    { duration: 0.75, easing: 'ease-in-out' },\n  );\n\n  flipAnim.finished.then(() => {\n    clearInlineStyles(target);\n    currentSide = otherSide(currentSide);\n    toNeutral();\n  });\n}","code":"<script lang=\"ts\">\n  import { onMount, onDestroy, tick } from 'svelte';\n  import type { Writable } from 'svelte/store';\n  import type { Options } from '$lib/options';\n  import { getProjection, setInlineStyles, clearInlineStyles } from 'projectrix';\n  import { animate, type AnimationControls, type AnimationOptionsWithOverrides } from 'motion';\n\n  // options are part of demos infrastructure\n  export let options: Writable<Options>;\n  $: log = $options.log;\n\n  let leftOuter: HTMLElement;\n  let rightOuter: HTMLElement;\n\n  let leftInner: HTMLElement;\n  let rightInner: HTMLElement;\n\n  let leftTarget: HTMLElement;\n  let rightTarget: HTMLElement;\n\n  type Side = 'left' | 'right';\n  let currentSide: Side = 'left';\n  function isLeft(side: Side): boolean {\n    return side === 'left';\n  }\n  function otherSide(side: Side): Side {\n    return isLeft(side) ? 'right' : 'left';\n  }\n\n  let currentAnim: AnimationControls | undefined = undefined;\n\n  const ToNeutralDurationS = 2;\n  const ToFlipAnglesDurationS = 2;\n  const FlipDurationS = 0.75;\n\n  onMount(async () => {\n    await tick();\n    toNeutral();\n  });\n\n  onDestroy(() => {\n    currentAnim?.pause();\n    currentAnim = undefined;\n  });\n\n  function toNeutral(): void {\n    currentAnim = animate(\n      [leftOuter, rightOuter],\n      { transform: 'rotateY(0deg)' },\n      { duration: ToNeutralDurationS, easing: 'linear' },\n    );\n\n    raiseCurrentSideInner(ToNeutralDurationS);\n\n    currentAnim.finished.then(() => {\n      toFlipAnglesForCurrentSide();\n    });\n  }\n\n  function toFlipAnglesForCurrentSide(): void {\n    // switch outers' pivot sides\n    leftOuter.style.transformOrigin = otherSide(currentSide);\n    rightOuter.style.transformOrigin = currentSide;\n\n    currentAnim = animate(\n      leftOuter,\n      { transform: isLeft(currentSide) ? 'rotateY(-66deg)' : 'rotateY(66deg)' },\n      { duration: ToFlipAnglesDurationS, easing: 'linear' },\n    );\n    animate(\n      rightOuter,\n      { transform: isLeft(currentSide) ? 'rotateY(66deg)' : 'rotateY(-66deg)' },\n      { duration: ToFlipAnglesDurationS, easing: 'linear' },\n    );\n\n    lowerCurrentSideInner(ToFlipAnglesDurationS);\n\n    currentAnim.finished.then(() => {\n      flipFromCurrentSide();\n    });\n  }\n\n  function flipFromCurrentSide(): void {\n    const subject = isLeft(currentSide) ? leftTarget : rightTarget;\n    const target = isLeft(currentSide) ? rightTarget : leftTarget;\n    const { toSubject, toTargetOrigin } = getProjection(subject, target, {\n      log,\n    });\n\n    setInlineStyles(target, toSubject);\n    subject.style.opacity = '0';\n    target.style.opacity = '1';\n\n    currentAnim = animate(\n      target,\n      { ...toTargetOrigin },\n      { duration: FlipDurationS, easing: 'ease-in-out' },\n    );\n\n    currentAnim.finished.then(() => {\n      clearInlineStyles(target);\n      currentSide = otherSide(currentSide);\n      toNeutral();\n    });\n  }\n\n  function raiseCurrentSideInner(durationS: number): void {\n    const inner = isLeft(currentSide) ? leftInner : rightInner;\n    const target = isLeft(currentSide) ? leftTarget : rightTarget;\n\n    const animOptions: AnimationOptionsWithOverrides = {\n      delay: durationS * 0.25,\n      duration: durationS * 0.5,\n      easing: 'linear',\n    };\n    animate(inner, { transform: 'rotateX(47deg)' }, animOptions);\n    animate(\n      target,\n      { transform: 'translateY(1em) rotateX(314deg) rotateY(360deg) translateY(-4em)' },\n      animOptions,\n    );\n  }\n\n  function lowerCurrentSideInner(durationS: number): void {\n    const inner = isLeft(currentSide) ? leftInner : rightInner;\n    const target = isLeft(currentSide) ? leftTarget : rightTarget;\n\n    const animOptions: AnimationOptionsWithOverrides = {\n      delay: durationS * 0.25,\n      duration: durationS * 0.75,\n      easing: 'linear',\n    };\n    animate(inner, { transform: 'rotateX(80deg)' }, animOptions);\n    animate(\n      target,\n      { transform: 'translateY(-4em) rotateX(280deg) rotateY(360deg) translateY(-4em)' },\n      animOptions,\n    );\n  }\n</script>\n\n<div class=\"two-sided-flex\">\n  <div bind:this={leftOuter} class=\"perspective-container left outer\">\n    <div bind:this={leftInner} class=\"perspective-container left inner\">\n      <div bind:this={leftTarget} class=\"target left\">\n        <span>css is awesome</span>\n      </div>\n    </div>\n  </div>\n  <div bind:this={rightOuter} class=\"perspective-container right outer\">\n    <div bind:this={rightInner} class=\"perspective-container right inner\">\n      <div bind:this={rightTarget} class=\"target right\">\n        <span>css is awesome</span>\n      </div>\n    </div>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .two-sided-flex {\n    position: relative;\n    margin-top: 1.5em;\n\n    width: 100%;\n    aspect-ratio: 3.6 / 1;\n    container-type: inline-size;\n\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n  }\n\n  .perspective-container {\n    font-size: 1.6cqw;\n\n    border: solid 3px purple;\n    width: 15em;\n    height: 15em;\n\n    color: purple;\n  }\n\n  .outer {\n    position: relative;\n    padding: 1em;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    perspective: 200px;\n    transform-style: preserve-3d;\n  }\n  .left.outer {\n    transform-origin: left;\n    transform: rotateY(66deg);\n  }\n  .right.outer {\n    transform-origin: right;\n    transform: rotateY(-66deg);\n  }\n\n  .inner {\n    width: 14em;\n    height: 14em;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    transform-origin: bottom;\n    transform: rotateX(80deg);\n    transform-style: preserve-3d;\n  }\n\n  .target {\n    border: solid 3px limegreen;\n    padding: 0.4em;\n    width: 9.4em;\n    height: 12em;\n\n    transform: translateY(-4em) rotateX(280deg) rotateY(360deg) translateY(-4em);\n\n    font-weight: 300;\n    color: limegreen;\n    background-color: #12415a55;\n\n    span {\n      font-size: 3.6em;\n    }\n  }\n  .right.target {\n    opacity: 0;\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'motion'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">let</span><span style=\"color:#E06C75\"> currentSide</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'left'</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#98C379\">'right'</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> 'left'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> flipFromCurrentSide</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> subject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> currentSide</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#98C379\"> 'left'</span><span style=\"color:#C678DD\"> ?</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> target</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> currentSide</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#98C379\"> 'left'</span><span style=\"color:#C678DD\"> ?</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  subject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> flipAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    target</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    { ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    { </span><span style=\"color:#E06C75\">duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">0.75</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'ease-in-out'</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  );</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  flipAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">finished</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentSide</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> otherSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentSide</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    toNeutral</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">onDestroy</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Writable</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte/store'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">Options</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/options'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> AnimationControls</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> AnimationOptionsWithOverrides</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'motion'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  export</span><span style=\"color:#C678DD\"> let</span><span style=\"color:#E06C75\"> options</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Writable</span><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E5C07B\">Options</span><span style=\"color:#ABB2BF\">>;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">  $</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftOuter</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightOuter</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftInner</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightInner</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  type</span><span style=\"color:#E5C07B\"> Side</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> 'left'</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#98C379\">'right'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentSide</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> 'left'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">side</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">boolean</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#E06C75\"> side</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#98C379\"> 'left'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> otherSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">side</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#98C379\"> 'right'</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#98C379\"> 'left'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentAnim</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">AnimationControls</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> ToNeutralDurationS</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 2</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> ToFlipAnglesDurationS</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 2</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> FlipDurationS</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 0.75</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    toNeutral</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onDestroy</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">pause</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> toNeutral</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      [</span><span style=\"color:#E06C75\">leftOuter</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">rightOuter</span><span style=\"color:#ABB2BF\">],</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { </span><span style=\"color:#E06C75\">transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'rotateY(0deg)'</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { </span><span style=\"color:#E06C75\">duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">ToNeutralDurationS</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    );</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    raiseCurrentSideInner</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">ToNeutralDurationS</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">finished</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      toFlipAnglesForCurrentSide</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> toFlipAnglesForCurrentSide</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // switch outers' pivot sides</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    leftOuter</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">transformOrigin</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> otherSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentSide</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    rightOuter</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">transformOrigin</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> currentSide</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      leftOuter</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { </span><span style=\"color:#E06C75\">transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#61AFEF\">isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentSide</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#98C379\"> 'rotateY(-66deg)'</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#98C379\"> 'rotateY(66deg)'</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { </span><span style=\"color:#E06C75\">duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">ToFlipAnglesDurationS</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    );</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      rightOuter</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { </span><span style=\"color:#E06C75\">transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#61AFEF\">isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentSide</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#98C379\"> 'rotateY(66deg)'</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#98C379\"> 'rotateY(-66deg)'</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { </span><span style=\"color:#E06C75\">duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">ToFlipAnglesDurationS</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    );</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    lowerCurrentSideInner</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">ToFlipAnglesDurationS</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">finished</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      flipFromCurrentSide</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> flipFromCurrentSide</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> subject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentSide</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> target</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentSide</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      log</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    subject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      target</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { </span><span style=\"color:#E06C75\">duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">FlipDurationS</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'ease-in-out'</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    );</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">finished</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      currentSide</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> otherSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentSide</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      toNeutral</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> raiseCurrentSideInner</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">durationS</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">number</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> inner</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentSide</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> leftInner</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightInner</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> target</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentSide</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> animOptions</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">AnimationOptionsWithOverrides</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      delay</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">durationS</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 0.25</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">durationS</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 0.5</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    };</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">inner</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'rotateX(47deg)'</span><span style=\"color:#ABB2BF\"> }, </span><span style=\"color:#E06C75\">animOptions</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      target</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { </span><span style=\"color:#E06C75\">transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'translateY(1em) rotateX(314deg) rotateY(360deg) translateY(-4em)'</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      animOptions</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    );</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> lowerCurrentSideInner</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">durationS</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">number</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> inner</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentSide</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> leftInner</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightInner</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> target</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentSide</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> animOptions</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">AnimationOptionsWithOverrides</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      delay</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">durationS</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 0.25</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">durationS</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 0.75</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    };</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">inner</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'rotateX(80deg)'</span><span style=\"color:#ABB2BF\"> }, </span><span style=\"color:#E06C75\">animOptions</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      target</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      { </span><span style=\"color:#E06C75\">transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'translateY(-4em) rotateX(280deg) rotateY(360deg) translateY(-4em)'</span><span style=\"color:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      animOptions</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    );</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"two-sided-flex\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftOuter</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"perspective-container left outer\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftInner</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"perspective-container left inner\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"target left\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">>css is awesome&#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightOuter</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"perspective-container right outer\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightInner</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"perspective-container right inner\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"target right\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">>css is awesome&#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .two-sided-flex</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">relative</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    margin-top: </span><span style=\"color:#D19A66\">1.5</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">100</span><span style=\"color:#E06C75\">%</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    aspect-ratio: </span><span style=\"color:#D19A66\">3.6</span><span style=\"color:#56B6C2\"> /</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: inline-size;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: </span><span style=\"color:#D19A66\">flex</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: </span><span style=\"color:#D19A66\">space-around</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .perspective-container</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    font-size: </span><span style=\"color:#D19A66\">1.6</span><span style=\"color:#E06C75\">cqw</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#D19A66\"> purple</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">15</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">15</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    color: </span><span style=\"color:#D19A66\">purple</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .outer</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: </span><span style=\"color:#D19A66\">relative</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    padding: </span><span style=\"color:#D19A66\">1</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: </span><span style=\"color:#D19A66\">flex</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    perspective: </span><span style=\"color:#D19A66\">200</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-style: </span><span style=\"color:#D19A66\">preserve-3d</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .left.outer</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-origin: </span><span style=\"color:#D19A66\">left</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotateY</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">66</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .right.outer</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-origin: </span><span style=\"color:#D19A66\">right</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotateY</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">-66</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .inner</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">14</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">14</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: </span><span style=\"color:#D19A66\">flex</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: </span><span style=\"color:#D19A66\">center</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-origin: </span><span style=\"color:#D19A66\">bottom</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">rotateX</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">80</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-style: </span><span style=\"color:#D19A66\">preserve-3d</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .target</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: </span><span style=\"color:#D19A66\">solid</span><span style=\"color:#D19A66\"> 3</span><span style=\"color:#E06C75\">px</span><span style=\"color:#ABB2BF\"> limegreen;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    padding: </span><span style=\"color:#D19A66\">0.4</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: </span><span style=\"color:#D19A66\">9.4</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: </span><span style=\"color:#D19A66\">12</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: </span><span style=\"color:#56B6C2\">translateY</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">-4</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">rotateX</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">280</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">rotateY</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">360</span><span style=\"color:#E06C75\">deg</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">translateY</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">-4</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    font-weight: </span><span style=\"color:#D19A66\">300</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    color: limegreen;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    background-color: </span><span style=\"color:#D19A66\">#12415a55</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    span</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      font-size: </span><span style=\"color:#D19A66\">3.6</span><span style=\"color:#E06C75\">em</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  .right.target</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: </span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}]]);