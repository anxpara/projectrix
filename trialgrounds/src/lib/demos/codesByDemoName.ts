import type { CodesByDemoName } from './demoCodes';

export const codesByDemoName: CodesByDemoName = new Map([["flip",{"usage":"// don't combine projectrix's setInlineStyles with animejs' animate; use utils.set\nimport { measureSubject, getProjection, clearInlineStyles } from 'projectrix';\nimport { animate, utils } from 'animejs';\n\n// the F.L.I.P. technique inverts a direct animation: measure the element's first position,\n// apply a dom change to it, then play the animation from its first position to its last\nfunction flipTargetToNextParent(target: HTMLElement, nextParent: HTMLElement): void {\n  const firstPosition = measureSubject(target);\n\n  nextParent.append(target);\n\n  // RAF waits for pending dom changes to be rendered\n  requestAnimationFrame(() => {\n    // set target to the projection of its first position\n    const { toSubject, toTargetOrigin } = getProjection(firstPosition, target);\n    utils.set(target, toSubject);\n\n    // animate target to its last position, i.e. its current origin\n    animate(target, {\n      ...toTargetOrigin,\n      \n      duration: 1000,\n      ease: 'outQuad',\n\n      // clear inline styles from the projection once they're redundant\n      onComplete: () => clearInlineStyles(target),\n    });\n  });\n}","code":"<script lang=\"ts\">\n  import { onDestroy, onMount, tick } from 'svelte';\n  import { animate, utils, type JSAnimation } from 'animejs';\n  import { clearInlineStyles, getProjection, measureSubject } from 'projectrix';\n  import { type DemoProps } from '$lib/demos/demos.svelte';\n\n  // startSlot and options are part of demos infrastructure\n  let { startSlot, options }: DemoProps = $props();\n  const log = $derived(options.value.log);\n\n  let target = $state() as HTMLElement;\n  let leftParent = $state() as HTMLElement;\n  let rightParent = $state() as HTMLElement;\n\n  let currentAnim: JSAnimation | undefined;\n  let currentTimeout: NodeJS.Timeout | undefined;\n\n  onMount(async () => {\n    await tick();\n    startSlot.show();\n\n    currentTimeout = setTimeout(() => {\n      swapSlotForTarget(target);\n      flipTargetToNextParent(target, rightParent);\n    }, 1000);\n  });\n\n  onDestroy(() => {\n    currentAnim?.cancel();\n    clearTimeout(currentTimeout);\n  });\n\n  function swapSlotForTarget(target: HTMLElement): void {\n    const toSlot = getProjection(startSlot.getSlotSubject(), target).toSubject;\n    utils.set(target, {\n      ...toSlot,\n      opacity: 1,\n    });\n    startSlot.hide();\n  }\n\n  function flipTargetToNextParent(target: HTMLElement, nextParent: HTMLElement): void {\n    const subject = measureSubject(target); // include any slot projection styles in the measurement...\n    \n    nextParent.append(target);\n    clearInlineStyles(target); // set to proper origin under nextParent by removing slot projection styles\n\n    requestAnimationFrame(() => {\n      const { toSubject, toTargetOrigin } = getProjection(subject, target, { log });\n\n      utils.set(target, toSubject);\n\n      currentAnim = animate(target, {\n        ...toTargetOrigin,\n\n        duration: 1000,\n        easing: 'outQuad',\n\n        onComplete: () => {\n          clearInlineStyles(target);\n\n          animateParent(nextParent).then(() => {\n            currentTimeout = setTimeout(() => {\n              flipTargetToNextParent(target, getNextParent(nextParent));\n            }, 1000);\n          });\n        },\n      });\n    });\n  }\n\n  function animateParent(parent: HTMLElement): JSAnimation {\n    const dir = parent === rightParent ? -1 : 1;\n\n    currentAnim = animate(parent, {\n      transform: [\n        'skew(' + 15 * dir + 'deg)',\n        'skew(' + 15 * dir + 'deg) rotate(' + -20 * dir + 'deg)',\n        'skew(' + 15 * dir + 'deg) rotate(' + 20 * dir + 'deg)',\n        'skew(' + 15 * dir + 'deg)',\n      ],\n\n      duration: 1000,\n      ease: 'inOutQuad',\n    });\n\n    return currentAnim;\n  }\n\n  function getNextParent(currentParent: HTMLElement): HTMLElement {\n    return currentParent === rightParent ? leftParent : rightParent;\n  }\n</script>\n\n<div class=\"size-container\">\n  <div class=\"parents-container\">\n    <div bind:this={leftParent} class=\"parent left\">\n      <div bind:this={target} class=\"demo-target child\"></div>\n    </div>\n\n    <div bind:this={rightParent} class=\"parent right\"></div>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .size-container {\n    position: relative;\n    margin-top: 1.5em;\n    width: 100%;\n    aspect-ratio: 4 / 1;\n\n    container-type: size;\n  }\n\n  .parents-container {\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    gap: 25cqw;\n  }\n\n  .parent {\n    border: dashed 3px darkmagenta;\n    width: 21cqw;\n    height: 21cqw;\n\n    will-change: transform;\n\n    .demo-target {\n      position: absolute;\n      left: 0px;\n      top: 0px;\n      border: solid 3px limegreen;\n      width: 10.75cqw;\n      height: 10.75cqw;\n\n      opacity: 0;\n    }\n  }\n  .left {\n    transform: skew(15deg);\n  }\n  .right {\n    transform: skew(-15deg);\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">// don't combine projectrix's setInlineStyles with animejs' animate; use utils.set</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">measureSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">utils</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'animejs'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">// the F.L.I.P. technique inverts a direct animation: measure the element's first position,</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">// apply a dom change to it, then play the animation from its first position to its last</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> flipTargetToNextParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">nextParent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> firstPosition</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> measureSubject</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  nextParent</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">append</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // RAF waits for pending dom changes to be rendered</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  requestAnimationFrame</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // set target to the projection of its first position</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">firstPosition</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    utils</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // animate target to its last position, i.e. its current origin</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      </span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'outQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">      // clear inline styles from the projection once they're redundant</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      onComplete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onDestroy</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">utils</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> JSAnimation</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'animejs'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">measureSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> DemoProps</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/demos/demos.svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // startSlot and options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">startSlot</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">options</span><span style=\"color:#ABB2BF\"> }: </span><span style=\"color:#E5C07B\">DemoProps</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">props</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">derived</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">value</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> target</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftParent</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentAnim</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">JSAnimation</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentTimeout</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">NodeJS</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">Timeout</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">show</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentTimeout</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      swapSlotForTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      flipTargetToNextParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">rightParent</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }, </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onDestroy</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">cancel</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearTimeout</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTimeout</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> swapSlotForTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> toSlot</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">getSlotSubject</span><span style=\"color:#ABB2BF\">(), </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">).</span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    utils</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">toSlot</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      opacity</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">hide</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> flipTargetToNextParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">nextParent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> subject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> measureSubject</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">); </span><span style=\"color:#7F848E;font-style:italic\">// include any slot projection styles in the measurement...</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    </span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    nextParent</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">append</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">); </span><span style=\"color:#7F848E;font-style:italic\">// set to proper origin under nextParent by removing slot projection styles</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    requestAnimationFrame</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      utils</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'outQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        onComplete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">          clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">          animateParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextParent</span><span style=\"color:#ABB2BF\">).</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">            currentTimeout</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">              flipTargetToNextParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#61AFEF\">getNextParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextParent</span><span style=\"color:#ABB2BF\">));</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">            }, </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">          });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> animateParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">parent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">JSAnimation</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> dir</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> parent</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#C678DD\"> ?</span><span style=\"color:#56B6C2\"> -</span><span style=\"color:#D19A66\">1</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">parent</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      transform</span><span style=\"color:#ABB2BF\">: [</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">        'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">        'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg) rotate('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#56B6C2\"> -</span><span style=\"color:#D19A66\">20</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">        'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg) rotate('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 20</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">        'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ],</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'inOutQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#E06C75\"> currentAnim</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> getNextParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">currentParent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#E06C75\"> currentParent</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#C678DD\"> ?</span><span style=\"color:#E06C75\"> leftParent</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"size-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parents-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftParent</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parent left\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">target</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-target child\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightParent</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parent right\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .size-container {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: relative;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    margin-top: 1.5em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 100%;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    aspect-ratio: 4 / 1;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: size;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .parents-container {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 100%;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 100%;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: flex;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: center;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: center;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    gap: 25cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .parent {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: dashed 3px darkmagenta;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 21cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 21cqw;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    will-change: transform;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    .demo-target {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      position: absolute;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      left: 0px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      top: 0px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      border: solid 3px limegreen;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      width: 10.75cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      height: 10.75cqw;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      opacity: 0;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .left {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: skew(15deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .right {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: skew(-15deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}],["animate",{"usage":"import { getProjection, type PartialProjectionResults } from 'projectrix';\nimport { animate } from 'animejs';\n\nfunction animateTargetToSubject(target: HTMLElement, subject: HTMLElement): void {\n  const { toSubject } = getProjection(subject, target) as PartialProjectionResults;\n  delete toSubject.borderStyle; // preserve target's border style\n\n  animate(target, {\n    ...toSubject,\n\n    duration: 400,\n    ease: 'outQuad',\n  });\n}\n","code":"<script lang=\"ts\">\n  import { onMount, tick } from 'svelte';\n  import { animate } from 'animejs';\n  import { getProjection, setInlineStyles, type PartialProjectionResults } from 'projectrix';\n  import type { DemoProps } from '$lib/demos/demos.svelte';\n\n  // startSlot and options are part of demos infrastructure\n  let { startSlot, options }: DemoProps = $props();\n  const log = $derived(options.value.log);\n\n  let target = $state() as HTMLElement;\n\n  onMount(async () => {\n    await tick();\n    startSlot.show();\n  });\n\n  function swapSlotForTarget(target: HTMLElement): void {\n    const { toSubject } = getProjection(startSlot.getSlotSubject(), target);\n    setInlineStyles(target, toSubject);\n\n    startSlot.hide();\n    target.style.opacity = '1';\n  }\n\n  function animateTargetToSubject(target: HTMLElement, subject: HTMLElement): void {\n    const { toSubject } = getProjection(subject, target, { log }) as PartialProjectionResults;\n    delete toSubject.borderStyle;\n\n    animate(target, {\n      ...toSubject,\n\n      duration: 400,\n      ease: 'outQuad',\n    });\n  }\n\n  function subjectClickHandler(e: MouseEvent): void {\n    if (startSlot.isShowing()) swapSlotForTarget(target);\n    const subject = e.target as HTMLElement;\n    animateTargetToSubject(target, subject);\n  }\n</script>\n\n<div class=\"size-container\">\n  <div class=\"subject-flex\">\n    <button class=\"demo-subject\" onclick={subjectClickHandler} aria-label=\"demo basic subject\"\n    ></button>\n    <button\n      class=\"demo-subject rotated\"\n      onclick={subjectClickHandler}\n      aria-label=\"demo rotated subject\"\n    ></button>\n    <button\n      class=\"demo-subject parent\"\n      onclick={subjectClickHandler}\n      aria-label=\"demo parent subject\"\n    >\n      <div class=\"demo-subject child\" aria-label=\"demo child subject\"></div>\n    </button>\n  </div>\n</div>\n\n<div bind:this={target} class=\"demo-target\"></div>\n\n<style lang=\"scss\">\n  button {\n    all: unset;\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  .demo-subject:focus-visible,\n  .parent:focus-visible {\n    outline: solid 2px white;\n    outline-offset: 4px;\n  }\n\n  .demo-target {\n    position: absolute; // any positioning works with Projectrix\n    border: solid 3px limegreen;\n\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  .size-container {\n    position: relative;\n    margin-top: 1.5em;\n    width: 100%;\n    aspect-ratio: 4 / 1;\n\n    container-type: size;\n  }\n\n  .subject-flex {\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    gap: 10cqw;\n  }\n\n  .demo-subject {\n    border: dashed 3px yellow;\n    width: 14.25cqw;\n    height: 14.25cqw;\n\n    cursor: pointer;\n  }\n\n  .rotated {\n    transform: rotate(45deg);\n  }\n\n  .parent {\n    width: 21cqw;\n    height: 21cqw;\n    border-color: darkmagenta;\n\n    transform: skew(-15deg);\n\n    .child {\n      position: absolute;\n      left: 0px;\n      top: 0px;\n\n      width: 10.75cqw;\n      height: 10.75cqw;\n    }\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'animejs'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> animateTargetToSubject</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  delete</span><span style=\"color:#E5C07B\"> toSubject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderStyle</span><span style=\"color:#ABB2BF\">; </span><span style=\"color:#7F848E;font-style:italic\">// preserve target's border style</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    ...</span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">400</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'outQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span>\n<span class=\"line\"></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'animejs'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">DemoProps</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/demos/demos.svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // startSlot and options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">startSlot</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">options</span><span style=\"color:#ABB2BF\"> }: </span><span style=\"color:#E5C07B\">DemoProps</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">props</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">derived</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">value</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> target</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">show</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> swapSlotForTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">getSlotSubject</span><span style=\"color:#ABB2BF\">(), </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">hide</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> animateTargetToSubject</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> }) </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    delete</span><span style=\"color:#E5C07B\"> toSubject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderStyle</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">400</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'outQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">MouseEvent</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">isShowing</span><span style=\"color:#ABB2BF\">()) </span><span style=\"color:#61AFEF\">swapSlotForTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> subject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">target</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animateTargetToSubject</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"size-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"subject-flex\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject\"</span><span style=\"color:#D19A66\"> onclick</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">subjectClickHandler</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo basic subject\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    >&#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">      class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject rotated\"</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">      onclick</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">subjectClickHandler</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">      aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo rotated subject\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    >&#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">      class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject parent\"</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">      onclick</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">subjectClickHandler</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">      aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo parent subject\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject child\"</span><span style=\"color:#D19A66\"> aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo child subject\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">target</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  button {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    all: unset;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    -webkit-tap-highlight-color: transparent;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .demo-subject:focus-visible,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .parent:focus-visible {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: solid 2px white;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-offset: 4px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .demo-target {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: absolute; // any positioning works with Projectrix</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: solid 3px limegreen;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: 0;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    pointer-events: none;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .size-container {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: relative;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    margin-top: 1.5em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 100%;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    aspect-ratio: 4 / 1;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: size;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .subject-flex {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 100%;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 100%;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: flex;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: center;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: center;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    gap: 10cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .demo-subject {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: dashed 3px yellow;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 14.25cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 14.25cqw;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    cursor: pointer;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .rotated {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotate(45deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .parent {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 21cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 21cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-color: darkmagenta;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: skew(-15deg);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    .child {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      position: absolute;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      left: 0px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      top: 0px;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      width: 10.75cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      height: 10.75cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}],["match",{"usage":"import { setInlineStyles, getProjection } from 'projectrix';\n\nfunction match(target: HTMLElement, subject: HTMLElement): void {\n  setInlineStyles(target, getProjection(subject, target).toSubject);\n}","code":"<script lang=\"ts\">\n  import { onMount, tick } from 'svelte';\n  import { getProjection, setInlineStyles } from 'projectrix';\n  import type { DemoProps } from '$lib/demos/demos.svelte';\n\n  // startSlot and options are part of demos infrastructure\n  let { startSlot, options }: DemoProps = $props();\n  const log = $derived(options.value.log);\n\n  let target = $state() as HTMLElement;\n\n  onMount(async () => {\n    await tick();\n    startSlot.show();\n  });\n\n  function swapSlotForTarget(target: HTMLElement): void {\n    startSlot.hide();\n    target.style.opacity = '1';\n  }\n\n  function match(target: HTMLElement, subject: HTMLElement): void {\n    setInlineStyles(target, getProjection(subject, target, { log }).toSubject);\n  }\n\n  function subjectClickHandler(e: MouseEvent): void {\n    if (startSlot.isShowing()) swapSlotForTarget(target);\n    const subject = e.target as HTMLElement;\n    match(target, subject);\n  }\n</script>\n\n<div class=\"size-container\">\n  <div class=\"subject-flex\">\n    <button class=\"demo-subject\" onclick={subjectClickHandler} aria-label=\"basic subject\"></button>\n    <button class=\"demo-subject rotated\" onclick={subjectClickHandler} aria-label=\"rotated subject\"\n    ></button>\n    <button class=\"demo-subject parent\" onclick={subjectClickHandler} aria-label=\"parent subject\">\n      <div class=\"demo-subject child\" aria-label=\"child subject\"></div>\n    </button>\n  </div>\n</div>\n\n<div bind:this={target} class=\"demo-target\"></div>\n\n<style lang=\"scss\">\n  button {\n    all: unset;\n    -webkit-tap-highlight-color: transparent;\n  }\n\n  .demo-subject:focus-visible,\n  .parent:focus-visible {\n    outline: solid 2px white;\n    outline-offset: 4px;\n  }\n\n  .demo-target {\n    position: absolute; // any positioning works with Projectrix\n    border: solid 3px limegreen;\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  .size-container {\n    position: relative;\n    margin-top: 1.5em;\n    width: 100%;\n    aspect-ratio: 4 / 1;\n\n    container-type: size;\n  }\n\n  .subject-flex {\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    gap: 10cqw;\n  }\n\n  .demo-subject {\n    border: dashed 3px yellow;\n    width: 14.25cqw;\n    height: 14.25cqw;\n\n    cursor: pointer;\n  }\n\n  .rotated {\n    border-style: solid;\n    transform: rotate(45deg);\n  }\n\n  .parent {\n    width: 21cqw;\n    height: 21cqw;\n    border-style: dashed;\n    border-color: darkmagenta;\n\n    transform: skew(-15deg);\n\n    .child {\n      position: absolute;\n      left: 0px;\n      top: 0px;\n\n      width: 10.75cqw;\n      height: 10.75cqw;\n      border-style: dotted;\n    }\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> match</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#61AFEF\">getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">).</span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">DemoProps</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/demos/demos.svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // startSlot and options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">startSlot</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">options</span><span style=\"color:#ABB2BF\"> }: </span><span style=\"color:#E5C07B\">DemoProps</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">props</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">derived</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">value</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> target</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">show</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> swapSlotForTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">hide</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> match</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#61AFEF\">getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> }).</span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> subjectClickHandler</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">MouseEvent</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">isShowing</span><span style=\"color:#ABB2BF\">()) </span><span style=\"color:#61AFEF\">swapSlotForTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> subject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">target</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    match</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"size-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"subject-flex\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject\"</span><span style=\"color:#D19A66\"> onclick</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">subjectClickHandler</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"basic subject\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject rotated\"</span><span style=\"color:#D19A66\"> onclick</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">subjectClickHandler</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"rotated subject\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    >&#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject parent\"</span><span style=\"color:#D19A66\"> onclick</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">subjectClickHandler</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parent subject\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-subject child\"</span><span style=\"color:#D19A66\"> aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"child subject\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">target</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  button {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    all: unset;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    -webkit-tap-highlight-color: transparent;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .demo-subject:focus-visible,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .parent:focus-visible {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: solid 2px white;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-offset: 4px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .demo-target {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: absolute; // any positioning works with Projectrix</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: solid 3px limegreen;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: 0;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    pointer-events: none;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .size-container {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: relative;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    margin-top: 1.5em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 100%;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    aspect-ratio: 4 / 1;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: size;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .subject-flex {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 100%;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 100%;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: flex;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: center;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: center;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    gap: 10cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .demo-subject {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: dashed 3px yellow;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 14.25cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 14.25cqw;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    cursor: pointer;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .rotated {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-style: solid;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotate(45deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .parent {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 21cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 21cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-style: dashed;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-color: darkmagenta;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: skew(-15deg);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    .child {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      position: absolute;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      left: 0px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      top: 0px;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      width: 10.75cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      height: 10.75cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      border-style: dotted;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}],["divGolf",{"usage":"import { setInlineStyles, getProjection } from 'projectrix';\n\n// each modifier contains its own green target\n// match the next target to the current target and toggle their opacities\nfunction moveTargetToModifier(target: HTMLElement, modifier: HTMLElement): void {\n  const nextTarget = modifier.firstElementChild as HTMLElement;\n  if (target.isSameNode(nextTarget)) return;\n\n  setInlineStyles(nextTarget, getProjection(target, nextTarget).toSubject);\n  target.style.opacity = '0';\n  nextTarget.style.opacity = '1';\n}","code":"<script lang=\"ts\">\n  import { onDestroy, onMount, tick } from 'svelte';\n  import { animate, utils, type JSAnimation } from 'animejs';\n  import { mat4, quat, vec3 } from 'gl-matrix';\n  import {\n    getProjection,\n    measureSubject,\n    setInlineStyles,\n    type Measurement,\n    type PartialProjectionResults,\n  } from 'projectrix';\n  import type { DemoProps } from '$lib/demos/demos.svelte';\n\n  // options are part of demos infrastructure\n  let { options }: DemoProps = $props();\n  const log = $derived(options.value.log);\n\n  const NumGoals = 5;\n  let goals: HTMLElement[] = $state([]);\n\n  let startTarget = $state() as HTMLElement;\n  let hitTarget = $state() as HTMLElement;\n  let spinnerModifier = $state() as HTMLElement;\n  let slider1Modifier = $state() as HTMLElement;\n  let slider2Modifier = $state() as HTMLElement;\n  let pulseContainer = $state() as HTMLElement;\n  let pulseTemplate = $state() as HTMLElement;\n\n  /* game state */\n\n  let currentTarget: HTMLElement | null;\n  let currentModifier: HTMLElement | null = $state(null);\n  let hitAnim: JSAnimation | undefined;\n\n  let startTime = 0;\n  let timer = $state(0);\n  let timerInterval: NodeJS.Timeout | undefined;\n\n  let moves = $state(0);\n  const goalsCompleted = new Set<HTMLElement>();\n  let courseCompleted = $state(false);\n\n  onMount(async () => {\n    await tick();\n    reset();\n  });\n\n  onDestroy(() => {\n    clearTimer();\n  });\n\n  /* game state management */\n\n  function reset(): void {\n    clearTimer();\n    moves = 0;\n    courseCompleted = false;\n    goals.forEach((goal) => {\n      goal.style.borderStyle = 'solid';\n      goal.style.borderColor = '#f00';\n    });\n    goalsCompleted.clear();\n\n    restart();\n  }\n\n  function restart(): void {\n    currentModifier = null;\n    setCurrentTarget(startTarget);\n    startModifiers();\n  }\n\n  function clearTimer(): void {\n    clearInterval(timerInterval);\n    timer = 0;\n  }\n\n  function startTimer(): void {\n    startTime = Date.now();\n    timerInterval = setInterval(() => {\n      timer = Math.floor((Date.now() - startTime) / 1000);\n    }, 1000);\n  }\n\n  function countMove(): void {\n    if (courseCompleted) {\n      return;\n    }\n    if (moves === 0) {\n      startTimer();\n    }\n    moves++;\n  }\n\n  function styleGoalCompleted(goal: HTMLElement): void {\n    goal.style.borderStyle = 'dotted';\n    goal.style.borderColor = '#32cd32';\n  }\n\n  function markGoalCompleted(goal: HTMLElement): void {\n    goalsCompleted.add(goal);\n    checkCourseCompleted();\n  }\n\n  function checkCourseCompleted(): void {\n    if (courseCompleted) {\n      return;\n    }\n    if (goalsCompleted.size === NumGoals) {\n      markCourseCompleted();\n    }\n  }\n\n  function markCourseCompleted(): void {\n    courseCompleted = true;\n    clearInterval(timerInterval);\n    timer = (Date.now() - startTime) / 1000;\n  }\n\n  function startModifiers(): void {\n    utils.set(spinnerModifier, {\n      rotate: '0deg',\n    });\n    animate(spinnerModifier, {\n      rotate: '-360deg',\n\n      duration: 3000,\n      ease: 'linear',\n      loop: true,\n    });\n\n    utils.set(slider1Modifier, {\n      rotate: '-45deg',\n      translateX: '0px',\n    });\n    utils.set(slider2Modifier, {\n      rotate: '225deg',\n      translateX: '0px',\n    });\n    const sliderAnimParams = {\n      translateX: '170px',\n\n      ease: 'linear',\n      loop: true,\n      alternate: true,\n    };\n    animate(slider1Modifier, {\n      ...sliderAnimParams,\n      duration: 1400,\n    });\n    animate(slider2Modifier, {\n      ...sliderAnimParams,\n      duration: 700,\n    });\n  }\n\n  function activateModifier(modifier: HTMLElement): void {\n    if (hitAnim) return;\n    if (!currentTarget) return;\n\n    animateClonedpulse(currentTarget);\n\n    if (modifier.isSameNode(currentModifier)) {\n      attemptAllgoals();\n      return;\n    }\n\n    moveTargetToModifier(currentTarget, modifier);\n  }\n\n  function moveTargetToModifier(target: HTMLElement, modifier: HTMLElement): void {\n    const nextTarget = modifier.firstElementChild as HTMLElement;\n    const { toSubject } = getProjection(target, nextTarget, {\n      log,\n    }) as PartialProjectionResults;\n    delete toSubject.borderStyle;\n\n    setInlineStyles(nextTarget, toSubject);\n\n    setCurrentModifier(modifier);\n    setCurrentTarget(nextTarget);\n  }\n\n  function setCurrentModifier(modifier: HTMLElement): void {\n    currentModifier = modifier;\n  }\n\n  function setCurrentTarget(target: HTMLElement): void {\n    if (currentTarget) {\n      currentTarget.style.opacity = '0';\n    }\n    target.style.opacity = '1';\n    currentTarget = target;\n  }\n\n  function attemptAllgoals(): void {\n    const subject = measureSubject(currentTarget!);\n\n    // schedule the bulk of the goal checking work till after\n    // the next animation frame to minimize hiccups\n    requestAnimationFrame(() => {\n      goals.forEach((goal) => attemptGoalHit(goal, subject, false));\n    });\n  }\n\n  function attemptGoalHit(goal: HTMLElement, subject?: Measurement, goalClicked = true): void {\n    subject = subject ?? measureSubject(currentTarget!);\n    const hit = checkIfTolerancesHit(goal, subject);\n\n    if (hit) {\n      currentModifier = null;\n      markGoalCompleted(goal);\n      animateHit(goal);\n    } else if (goalClicked) {\n      animateMiss(goal);\n    }\n  }\n\n  const distanceTolerancePx = 10;\n  const rotationToleranceDeg = 8;\n\n  function checkIfTolerancesHit(goal: HTMLElement, subject: Measurement): boolean {\n    const { toSubject, toTargetOrigin } = getProjection(subject, goal, {\n      transformType: 'transformMat4',\n    });\n\n    const basisToOrigin = toTargetOrigin.transformMat4 as mat4;\n    const basisToSubject = toSubject.transformMat4 as mat4;\n\n    const originToBasis = mat4.create();\n    mat4.invert(originToBasis, basisToOrigin);\n\n    const originToSubject = mat4.create();\n    mat4.multiply(originToSubject, originToBasis, basisToSubject);\n\n    const xPx = originToSubject[12];\n    const yPx = originToSubject[13];\n\n    // check distance\n    const distancePx = Math.sqrt(xPx * xPx + yPx * yPx);\n    if (distancePx > distanceTolerancePx) {\n      return false;\n    }\n\n    const rotationQuat = quat.create();\n    mat4.getRotation(rotationQuat, originToSubject);\n\n    const rotationVec3 = vec3.create();\n    const rotationDeg = (quat.getAxisAngle(rotationVec3, rotationQuat) * 180) / Math.PI;\n\n    // check rotation\n    const rotationDeltaDeg = 45 - Math.abs((rotationDeg % 90) - 45);\n    if (rotationDeltaDeg > rotationToleranceDeg) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /* animations */\n\n  function animateHit(goal: HTMLElement): void {\n    // match hit target to current target\n    const { toSubject } = getProjection(currentTarget!, hitTarget, { log });\n    utils.set(hitTarget, toSubject);\n    setCurrentTarget(hitTarget);\n\n    // animate hit target rest of way to goal\n    hitAnim = animate(hitTarget, {\n      ...getProjection(goal, hitTarget, { log }).toSubject,\n\n      duration: 300,\n      ease: 'outQuad',\n\n      onComplete: () => {\n        styleGoalCompleted(goal);\n\n        animateClonedpulse(hitTarget);\n        setTimeout(() => animateClonedpulse(hitTarget), 350);\n        setTimeout(() => animateClonedpulse(hitTarget), 700);\n\n        hitAnim = undefined;\n      },\n    });\n  }\n\n  function animateMiss(goal: HTMLElement): void {\n    goal.style.backgroundColor = 'rgba(255, 0, 0, 1)';\n    animate(goal, {\n      backgroundColor: 'rgba(255, 0, 0, 0)',\n\n      duration: 300,\n      ease: 'outQuad',\n    });\n  }\n\n  function animateClonedpulse(subject: HTMLElement): void {\n    const pulseClone = pulseTemplate.cloneNode() as HTMLElement;\n    pulseContainer.append(pulseClone);\n\n    const { toSubject } = getProjection(subject, pulseClone, { log });\n    utils.set(pulseClone, toSubject);\n    pulseClone.style.opacity = '1';\n\n    animate(pulseClone, {\n      outlineOffset: '18px',\n      outlineColor: 'rgba(50, 205, 50, 0)',\n\n      duration: 300,\n      easing: 'outQuad',\n\n      onComplete: () => {\n        pulseClone.remove();\n      },\n    });\n  }\n\n  /* input handling */\n\n  // prevent holding keys down\n  const keysDownBad: Record<string, boolean> = {};\n  function liftKey(key: string): void {\n    keysDownBad[key] = false;\n  }\n  // presses key; returns true if key was already down bad\n  function pressKeyDownBad(key: string): boolean {\n    if (keysDownBad[key]) {\n      return true;\n    }\n    keysDownBad[key] = true;\n    return false;\n  }\n\n  function isEnterKey(key: string): boolean {\n    if (['Enter', ' '].includes(key)) return true;\n    return false;\n  }\n\n  function handleWindowKeyUp(key: string): void {\n    liftKey(key);\n  }\n  function handleWindowKeyDown(key: string): void {\n    if (isEnterKey(key)) {\n      return;\n    }\n    if (pressKeyDownBad(key)) {\n      return;\n    }\n\n    switch (key) {\n      case '1':\n        countMove();\n        activateModifier(spinnerModifier);\n        spinnerModifier.focus();\n        return;\n      case '2':\n        countMove();\n        activateModifier(slider1Modifier);\n        slider1Modifier.focus();\n        return;\n      case '3':\n        countMove();\n        activateModifier(slider2Modifier);\n        slider2Modifier.focus();\n        return;\n      case 'r':\n        restart();\n        return;\n      case 'Delete':\n        reset();\n        return;\n    }\n  }\n\n  function handleModifierTap(e: Event): void {\n    e.preventDefault();\n    countMove();\n    const modifier = e.currentTarget as HTMLElement;\n    activateModifier(modifier);\n  }\n  function handleModifierKeyDown(e: KeyboardEvent): void {\n    const key = e.key;\n    const modifier = e.currentTarget as HTMLElement;\n    if (!isEnterKey(key)) {\n      return;\n    }\n    if (pressKeyDownBad(key)) {\n      return;\n    }\n\n    countMove();\n    activateModifier(modifier);\n  }\n\n  function handleRestartClick(): void {\n    countMove();\n    restart();\n  }\n\n  function handleResetClick(): void {\n    reset();\n  }\n</script>\n\n<!-- prettier-ignore -->\n<svelte:window \n  onkeyup={(e) => handleWindowKeyUp(e.key)} \n  onkeydown={(e) => handleWindowKeyDown(e.key)}\n/>\n\n<div class=\"centerer prevent-select disable-touch-zoom\">\n  <div class=\"course-sizer portrait-size-toggle\">\n    <div class=\"course portrait-rotate-toggle\">\n      <div bind:this={goals[0]} class=\"modifier goal goal-0\" aria-label=\"goal 0\">\n        <div class=\"golf-target child-target\"></div>\n      </div>\n      <div bind:this={goals[1]} class=\"modifier goal goal-1\" aria-label=\"goal 1\">\n        <div class=\"golf-target child-target\"></div>\n      </div>\n      <div bind:this={goals[2]} class=\"modifier goal goal-2\" aria-label=\"goal 2\">\n        <div class=\"golf-target child-target\"></div>\n      </div>\n      <div bind:this={goals[3]} class=\"modifier goal goal-3\" aria-label=\"goal 3\">\n        <div class=\"golf-target child-target\"></div>\n      </div>\n      <div bind:this={goals[4]} class=\"modifier goal goal-4\" aria-label=\"goal 4\">\n        <div class=\"golf-target child-target\"></div>\n      </div>\n\n      <div bind:this={startTarget} class=\"golf-target start-target\"></div>\n      <div bind:this={hitTarget} class=\"golf-target hit-target\"></div>\n\n      <button\n        bind:this={spinnerModifier}\n        class=\"modifier spinner\"\n        class:current={spinnerModifier?.isSameNode(currentModifier)}\n        onmousedown={handleModifierTap}\n        ontouchstart={handleModifierTap}\n        onkeydown={handleModifierKeyDown}\n        aria-label=\"spinner modifier\"\n      >\n        <div class=\"golf-target child-target\"></div>\n      </button>\n\n      <button\n        bind:this={slider1Modifier}\n        class=\"modifier slider1\"\n        class:current={slider1Modifier?.isSameNode(currentModifier)}\n        onmousedown={handleModifierTap}\n        ontouchstart={handleModifierTap}\n        onkeydown={handleModifierKeyDown}\n        aria-label=\"slider modifier 1\"\n      >\n        <div class=\"golf-target child-target\"></div>\n      </button>\n\n      <button\n        bind:this={slider2Modifier}\n        class=\"modifier slider2\"\n        class:current={slider2Modifier?.isSameNode(currentModifier)}\n        onmousedown={handleModifierTap}\n        ontouchstart={handleModifierTap}\n        onkeydown={handleModifierKeyDown}\n        aria-label=\"slider modifier 2\"\n      >\n        <div class=\"golf-target child-target\"></div>\n      </button>\n    </div>\n  </div>\n</div>\n\n<div bind:this={pulseContainer} class=\"pulse-container\">\n  <div bind:this={pulseTemplate} class=\"golf-target pulse-template\"></div>\n</div>\n\n<button class=\"restart\" onclick={handleRestartClick}>\n  <span class=\"material-symbols-outlined\"> replay </span>\n</button>\n<div class=\"scores\">\n  <div class=\"tracker score\" class:courseCompleted>\n    <span class=\"material-symbols-outlined\"> sports_score </span>\n    <p>{moves}</p>\n  </div>\n  <div class=\"tracker clock\" class:courseCompleted>\n    <span class=\"material-symbols-outlined\"> timer </span>\n    <p>{timer}s</p>\n  </div>\n\n  <button class=\"reset\" onclick={handleResetClick}>\n    <span class=\"material-symbols-outlined\"> delete </span>\n  </button>\n</div>\n\n<style lang=\"scss\">\n  $pxem: 16;\n\n  button {\n    all: unset;\n    -webkit-tap-highlight-color: transparent;\n    cursor: pointer;\n  }\n\n  .prevent-select {\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  .disable-touch-zoom {\n    touch-action: manipulation;\n  }\n\n  .spinner.current {\n    background-color: rgba(255, 0, 255, 0.15);\n  }\n  .slider1.current,\n  .slider2.current {\n    background-color: rgba(255, 255, 0, 0.4);\n  }\n  .goal:focus-visible,\n  .restart:focus-visible {\n    outline: solid 2px white;\n    outline-offset: 4px;\n  }\n\n  .restart {\n    position: absolute;\n    left: 0.8em;\n    top: min(4.4em, 16.8cqw);\n  }\n\n  .scores {\n    position: absolute;\n    right: 1em;\n    top: 0.5em;\n\n    display: flex;\n    gap: 1.1em;\n    font-weight: 700;\n\n    .tracker {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 0.1em;\n\n      p {\n        margin: 0;\n      }\n    }\n    .tracker.courseCompleted {\n      color: limeGreen;\n    }\n  }\n\n  .centerer {\n    width: 100%;\n\n    container-type: inline-size;\n\n    display: flex;\n    justify-content: center;\n  }\n\n  .course-sizer {\n    position: relative;\n    width: calc(620 / $pxem * 1em);\n    height: calc(270 / $pxem * 1em);\n  }\n\n  .course {\n    width: calc(620 / $pxem * 1em);\n    height: calc(270 / $pxem * 1em);\n    transform-origin: top left;\n\n    will-change: transform;\n  }\n\n  @container (max-width: 613px) {\n    .course-sizer.portrait-size-toggle {\n      width: calc(270 / $pxem * 1em);\n      height: calc(620 / $pxem * 1em);\n    }\n\n    .course.portrait-rotate-toggle {\n      transform: translateX(calc(270 / $pxem * 1em)) rotate(90deg);\n    }\n  }\n\n  .golf-target {\n    position: absolute;\n    border: solid 3px #32cd32;\n\n    width: calc(35 / $pxem * 1em);\n    height: calc(35 / $pxem * 1em);\n    outline: dotted 3px transparent;\n\n    pointer-events: none;\n  }\n\n  .start-target {\n    left: calc(10 / $pxem * 1em);\n    top: calc(60 / $pxem * 1em);\n  }\n\n  .child-target {\n    opacity: 0;\n  }\n\n  .hit-target {\n    opacity: 0;\n    background-color: limegreen;\n  }\n\n  .modifier {\n    position: absolute;\n    border: dashed 3px darkmagenta;\n\n    width: calc(150 / $pxem * 1em);\n    height: calc(150 / $pxem * 1em);\n\n    will-change: transform;\n  }\n  .modifier:focus-visible {\n    outline: solid 2px white;\n    outline-offset: 3px;\n  }\n\n  .spinner {\n    left: calc(60 / $pxem * 1em);\n    top: calc(70 / $pxem * 1em);\n  }\n\n  .slider1,\n  .slider2 {\n    height: calc(50 / $pxem * 1em);\n\n    border-color: yellow;\n  }\n\n  .slider1 {\n    left: calc(235 / $pxem * 1em);\n    top: calc(160 / $pxem * 1em);\n\n    transform: rotate(-45deg);\n  }\n  .slider2 {\n    left: calc(479 / $pxem * 1em);\n    top: calc(160 / $pxem * 1em);\n\n    transform: rotate(225deg);\n  }\n\n  .goal {\n    width: calc(35 / $pxem * 1em);\n    height: calc(35 / $pxem * 1em);\n\n    border-style: solid;\n    border-color: red;\n  }\n  .goal-0 {\n    left: calc(415 / $pxem * 1em);\n    top: calc(210 / $pxem * 1em);\n    transform: rotate(45deg);\n  }\n  .goal-1 {\n    left: calc(223 / $pxem * 1em);\n    top: calc(57 / $pxem * 1em);\n    transform: rotate(24deg);\n  }\n  .goal-2 {\n    left: calc(564 / $pxem * 1em);\n    top: calc(104 / $pxem * 1em);\n    transform: rotate(20deg);\n  }\n  .goal-3 {\n    left: calc(559 / $pxem * 1em);\n    top: calc(57 / $pxem * 1em);\n    transform: rotate(14deg);\n  }\n  .goal-4 {\n    left: calc(551 / $pxem * 1em);\n    top: calc(11 / $pxem * 1em);\n    transform: rotate(9deg);\n  }\n\n  .pulse-container {\n    will-change: transform;\n  }\n\n  .pulse-template {\n    opacity: 0;\n    border-color: transparent;\n    outline: solid 2px transparent;\n    outline-offset: 0px;\n    outline-color: rgba(50, 205, 50, 1);\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">// each modifier contains its own green target</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">// match the next target to the current target and toggle their opacities</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> moveTargetToModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">modifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> nextTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> modifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">firstElementChild</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">isSameNode</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">)) </span><span style=\"color:#C678DD\">return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#61AFEF\">getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">).</span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  nextTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onDestroy</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">utils</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> JSAnimation</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'animejs'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">mat4</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">quat</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">vec3</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'gl-matrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    getProjection</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    measureSubject</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    setInlineStyles</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    type</span><span style=\"color:#E06C75\"> Measurement</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    type</span><span style=\"color:#E06C75\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">DemoProps</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/demos/demos.svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">options</span><span style=\"color:#ABB2BF\"> }: </span><span style=\"color:#E5C07B\">DemoProps</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">props</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">derived</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">value</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> NumGoals</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 5</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> goals</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">[] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">([]);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> startTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> hitTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> spinnerModifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> slider1Modifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> slider2Modifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> pulseContainer</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> pulseTemplate</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  /* game state */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">null</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentModifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">null</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">null</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> hitAnim</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">JSAnimation</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> startTime</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> timer</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> timerInterval</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">NodeJS</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">Timeout</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> moves</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> goalsCompleted</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#C678DD\"> new</span><span style=\"color:#61AFEF\"> Set</span><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">>();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> courseCompleted</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#D19A66\">false</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    reset</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onDestroy</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearTimer</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  /* game state management */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> reset</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearTimer</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    moves</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    courseCompleted</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goals</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">forEach</span><span style=\"color:#ABB2BF\">((</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      goal</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderStyle</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> 'solid'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      goal</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderColor</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '#f00'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goalsCompleted</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">clear</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    restart</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> restart</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentModifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> null</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setCurrentTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">startTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    startModifiers</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> clearTimer</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearInterval</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">timerInterval</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    timer</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 0</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> startTimer</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    startTime</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> Date</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">now</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    timerInterval</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> setInterval</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      timer</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> Math</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">floor</span><span style=\"color:#ABB2BF\">((</span><span style=\"color:#E5C07B\">Date</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">now</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#56B6C2\">-</span><span style=\"color:#E06C75\"> startTime</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">/</span><span style=\"color:#D19A66\"> 1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }, </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> countMove</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">courseCompleted</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">moves</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#D19A66\"> 0</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      startTimer</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    moves</span><span style=\"color:#56B6C2\">++</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> styleGoalCompleted</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goal</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderStyle</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> 'dotted'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goal</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderColor</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '#32cd32'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> markGoalCompleted</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goalsCompleted</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">add</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    checkCourseCompleted</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> checkCourseCompleted</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">courseCompleted</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">goalsCompleted</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">size</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#E06C75\"> NumGoals</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      markCourseCompleted</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> markCourseCompleted</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    courseCompleted</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearInterval</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">timerInterval</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    timer</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">Date</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">now</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#56B6C2\">-</span><span style=\"color:#E06C75\"> startTime</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">/</span><span style=\"color:#D19A66\"> 1000</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> startModifiers</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    utils</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">spinnerModifier</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      rotate</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'0deg'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">spinnerModifier</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      rotate</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'-360deg'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">3000</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      loop</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">true</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    utils</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">slider1Modifier</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      rotate</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'-45deg'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      translateX</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'0px'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    utils</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">slider2Modifier</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      rotate</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'225deg'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      translateX</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'0px'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> sliderAnimParams</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      translateX</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'170px'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      loop</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">true</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      alternate</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">true</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    };</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">slider1Modifier</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">sliderAnimParams</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1400</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">slider2Modifier</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">sliderAnimParams</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">700</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">modifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">hitAnim</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animateClonedpulse</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">modifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">isSameNode</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentModifier</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      attemptAllgoals</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    moveTargetToModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">modifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> moveTargetToModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">modifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> nextTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> modifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">firstElementChild</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      log</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }) </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> PartialProjectionResults</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    delete</span><span style=\"color:#E5C07B\"> toSubject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">borderStyle</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setCurrentModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">modifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setCurrentTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> setCurrentModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">modifier</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentModifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> modifier</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> setCurrentTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">target</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      currentTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    target</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> target</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> attemptAllgoals</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> subject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> measureSubject</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // schedule the bulk of the goal checking work till after</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // the next animation frame to minimize hiccups</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    requestAnimationFrame</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      goals</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">forEach</span><span style=\"color:#ABB2BF\">((</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> attemptGoalHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#D19A66\">false</span><span style=\"color:#ABB2BF\">));</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> attemptGoalHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#C678DD\">?</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Measurement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">goalClicked</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    subject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> subject</span><span style=\"color:#56B6C2\"> ??</span><span style=\"color:#61AFEF\"> measureSubject</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> hit</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> checkIfTolerancesHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">hit</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      currentModifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> null</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      markGoalCompleted</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      animateHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    } </span><span style=\"color:#C678DD\">else</span><span style=\"color:#C678DD\"> if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">goalClicked</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      animateMiss</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> distanceTolerancePx</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 10</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> rotationToleranceDeg</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 8</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> checkIfTolerancesHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Measurement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">boolean</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      transformType</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'transformMat4'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> basisToOrigin</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> toTargetOrigin</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">transformMat4</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> mat4</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> basisToSubject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> toSubject</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">transformMat4</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> mat4</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> originToBasis</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> mat4</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">create</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    mat4</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">invert</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">originToBasis</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">basisToOrigin</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> originToSubject</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> mat4</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">create</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    mat4</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">multiply</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">originToSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">originToBasis</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">basisToSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> xPx</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> originToSubject</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">12</span><span style=\"color:#ABB2BF\">];</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> yPx</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> originToSubject</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">13</span><span style=\"color:#ABB2BF\">];</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // check distance</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> distancePx</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> Math</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">sqrt</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">xPx</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> xPx</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#E06C75\"> yPx</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> yPx</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">distancePx</span><span style=\"color:#56B6C2\"> ></span><span style=\"color:#E06C75\"> distanceTolerancePx</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> rotationQuat</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> quat</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">create</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    mat4</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">getRotation</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">rotationQuat</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">originToSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> rotationVec3</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> vec3</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">create</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> rotationDeg</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E5C07B\">quat</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">getAxisAngle</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">rotationVec3</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">rotationQuat</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">*</span><span style=\"color:#D19A66\"> 180</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">/</span><span style=\"color:#E5C07B\"> Math</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">PI</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // check rotation</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> rotationDeltaDeg</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 45</span><span style=\"color:#56B6C2\"> -</span><span style=\"color:#E5C07B\"> Math</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">abs</span><span style=\"color:#ABB2BF\">((</span><span style=\"color:#E06C75\">rotationDeg</span><span style=\"color:#56B6C2\"> %</span><span style=\"color:#D19A66\"> 90</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#56B6C2\">-</span><span style=\"color:#D19A66\"> 45</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">rotationDeltaDeg</span><span style=\"color:#56B6C2\"> ></span><span style=\"color:#E06C75\"> rotationToleranceDeg</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  /* animations */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> animateHit</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // match hit target to current target</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> });</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    utils</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setCurrentTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // animate hit target rest of way to goal</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    hitAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#61AFEF\">getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> }).</span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">300</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'outQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      onComplete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        styleGoalCompleted</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        animateClonedpulse</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> animateClonedpulse</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">), </span><span style=\"color:#D19A66\">350</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> animateClonedpulse</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#ABB2BF\">), </span><span style=\"color:#D19A66\">700</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        hitAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> animateMiss</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">goal</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    goal</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">backgroundColor</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> 'rgba(255, 0, 0, 1)'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">goal</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      backgroundColor</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'rgba(255, 0, 0, 0)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">300</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'outQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> animateClonedpulse</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">subject</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> pulseClone</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> pulseTemplate</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">cloneNode</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    pulseContainer</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">append</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">pulseClone</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">subject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">pulseClone</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> });</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    utils</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">pulseClone</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    pulseClone</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">pulseClone</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      outlineOffset</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'18px'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      outlineColor</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'rgba(50, 205, 50, 0)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">300</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      easing</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'outQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      onComplete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">        pulseClone</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">remove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  /* input handling */</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // prevent holding keys down</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> keysDownBad</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Record</span><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">boolean</span><span style=\"color:#ABB2BF\">> </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#ABB2BF\"> {};</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> liftKey</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">key</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    keysDownBad</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // presses key; returns true if key was already down bad</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> pressKeyDownBad</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">key</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">boolean</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">keysDownBad</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">]) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    keysDownBad</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">] </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> isEnterKey</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">key</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">boolean</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> ([</span><span style=\"color:#98C379\">'Enter'</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#98C379\">' '</span><span style=\"color:#ABB2BF\">].</span><span style=\"color:#61AFEF\">includes</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) </span><span style=\"color:#C678DD\">return</span><span style=\"color:#D19A66\"> true</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#D19A66\"> false</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleWindowKeyUp</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">key</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    liftKey</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleWindowKeyDown</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">key</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">string</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#61AFEF\">isEnterKey</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#61AFEF\">pressKeyDownBad</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    switch</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      case</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">spinnerModifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">        spinnerModifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">focus</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      case</span><span style=\"color:#98C379\"> '2'</span><span style=\"color:#ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">slider1Modifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">        slider1Modifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">focus</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      case</span><span style=\"color:#98C379\"> '3'</span><span style=\"color:#ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">slider2Modifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">        slider2Modifier</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">focus</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      case</span><span style=\"color:#98C379\"> 'r'</span><span style=\"color:#ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        restart</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      case</span><span style=\"color:#98C379\"> 'Delete'</span><span style=\"color:#ABB2BF\">:</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        reset</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleModifierTap</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Event</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">preventDefault</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> modifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">modifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleModifierKeyDown</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">KeyboardEvent</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> key</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> modifier</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#C678DD\"> as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#56B6C2\">!</span><span style=\"color:#61AFEF\">isEnterKey</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    if</span><span style=\"color:#ABB2BF\"> (</span><span style=\"color:#61AFEF\">pressKeyDownBad</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)) {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      return</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    activateModifier</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">modifier</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleRestartClick</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    countMove</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    restart</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> handleResetClick</span><span style=\"color:#ABB2BF\">(): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    reset</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">&#x3C;!-- prettier-ignore --></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#C678DD\">svelte</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E06C75\">window</span><span style=\"color:#ABB2BF\"> </span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  onkeyup</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> handleWindowKeyUp</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\"> </span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">  onkeydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">e</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> handleWindowKeyDown</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">e</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">key</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">/></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"centerer prevent-select disable-touch-zoom\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"course-sizer portrait-size-toggle\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"course portrait-rotate-toggle\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">goals</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">0</span><span style=\"color:#ABB2BF\">]</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier goal goal-0\"</span><span style=\"color:#D19A66\"> aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"goal 0\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">goals</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">1</span><span style=\"color:#ABB2BF\">]</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier goal goal-1\"</span><span style=\"color:#D19A66\"> aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"goal 1\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">goals</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">2</span><span style=\"color:#ABB2BF\">]</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier goal goal-2\"</span><span style=\"color:#D19A66\"> aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"goal 2\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">goals</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">3</span><span style=\"color:#ABB2BF\">]</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier goal goal-3\"</span><span style=\"color:#D19A66\"> aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"goal 3\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">goals</span><span style=\"color:#ABB2BF\">[</span><span style=\"color:#D19A66\">4</span><span style=\"color:#ABB2BF\">]</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier goal goal-4\"</span><span style=\"color:#D19A66\"> aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"goal 4\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">startTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target start-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">hitTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target hit-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">spinnerModifier</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier spinner\"</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#D19A66\">current</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E5C07B\">spinnerModifier</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">isSameNode</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentModifier</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        onmousedown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        ontouchstart</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        onkeydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierKeyDown</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"spinner modifier\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">slider1Modifier</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier slider1\"</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#D19A66\">current</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E5C07B\">slider1Modifier</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">isSameNode</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentModifier</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        onmousedown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        ontouchstart</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        onkeydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierKeyDown</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"slider modifier 1\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">button</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">        bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">slider2Modifier</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"modifier slider2\"</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        class</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#D19A66\">current</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E5C07B\">slider2Modifier</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">isSameNode</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentModifier</span><span style=\"color:#ABB2BF\">)</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        onmousedown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        ontouchstart</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierTap</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        onkeydown</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleModifierKeyDown</span><span style=\"color:#C678DD\">}</span></span>\n<span class=\"line\"><span style=\"color:#D19A66\">        aria-label</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"slider modifier 2\"</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target child-target\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">pulseContainer</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"pulse-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">pulseTemplate</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"golf-target pulse-template\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"restart\"</span><span style=\"color:#D19A66\"> onclick</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleRestartClick</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"material-symbols-outlined\"</span><span style=\"color:#ABB2BF\">> replay &#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scores\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"tracker score\"</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E06C75;font-style:italic\">courseCompleted</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"material-symbols-outlined\"</span><span style=\"color:#ABB2BF\">> sports_score &#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">p</span><span style=\"color:#ABB2BF\">></span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">moves</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">p</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"tracker clock\"</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E06C75;font-style:italic\">courseCompleted</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"material-symbols-outlined\"</span><span style=\"color:#ABB2BF\">> timer &#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">p</span><span style=\"color:#ABB2BF\">></span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">timer</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\">s&#x3C;/</span><span style=\"color:#E06C75\">p</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">button</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"reset\"</span><span style=\"color:#D19A66\"> onclick</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">handleResetClick</span><span style=\"color:#C678DD\">}</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"material-symbols-outlined\"</span><span style=\"color:#ABB2BF\">> delete &#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">button</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  $pxem: 16;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  button {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    all: unset;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    -webkit-tap-highlight-color: transparent;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    cursor: pointer;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .prevent-select {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    -webkit-user-select: none;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    -ms-user-select: none;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    user-select: none;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .disable-touch-zoom {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    touch-action: manipulation;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .spinner.current {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    background-color: rgba(255, 0, 255, 0.15);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .slider1.current,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .slider2.current {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    background-color: rgba(255, 255, 0, 0.4);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .goal:focus-visible,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .restart:focus-visible {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: solid 2px white;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-offset: 4px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .restart {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: absolute;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: 0.8em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: min(4.4em, 16.8cqw);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .scores {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: absolute;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    right: 1em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: 0.5em;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: flex;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    gap: 1.1em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    font-weight: 700;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    .tracker {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      display: flex;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      flex-direction: column;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      align-items: center;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      gap: 0.1em;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      p {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        margin: 0;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    .tracker.courseCompleted {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      color: limeGreen;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .centerer {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 100%;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: inline-size;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: flex;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: center;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .course-sizer {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: relative;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: calc(620 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: calc(270 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .course {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: calc(620 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: calc(270 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-origin: top left;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    will-change: transform;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  @container (max-width: 613px) {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    .course-sizer.portrait-size-toggle {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      width: calc(270 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      height: calc(620 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    .course.portrait-rotate-toggle {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      transform: translateX(calc(270 / $pxem * 1em)) rotate(90deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .golf-target {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: absolute;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: solid 3px #32cd32;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: calc(35 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: calc(35 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: dotted 3px transparent;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    pointer-events: none;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .start-target {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: calc(10 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: calc(60 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .child-target {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: 0;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .hit-target {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: 0;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    background-color: limegreen;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .modifier {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: absolute;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: dashed 3px darkmagenta;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: calc(150 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: calc(150 / $pxem * 1em);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    will-change: transform;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .modifier:focus-visible {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: solid 2px white;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-offset: 3px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .spinner {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: calc(60 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: calc(70 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .slider1,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .slider2 {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: calc(50 / $pxem * 1em);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-color: yellow;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .slider1 {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: calc(235 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: calc(160 / $pxem * 1em);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotate(-45deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .slider2 {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: calc(479 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: calc(160 / $pxem * 1em);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotate(225deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .goal {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: calc(35 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: calc(35 / $pxem * 1em);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-style: solid;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-color: red;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .goal-0 {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: calc(415 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: calc(210 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotate(45deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .goal-1 {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: calc(223 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: calc(57 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotate(24deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .goal-2 {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: calc(564 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: calc(104 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotate(20deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .goal-3 {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: calc(559 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: calc(57 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotate(14deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .goal-4 {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    left: calc(551 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    top: calc(11 / $pxem * 1em);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotate(9deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .pulse-container {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    will-change: transform;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .pulse-template {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: 0;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border-color: transparent;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline: solid 2px transparent;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-offset: 0px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    outline-color: rgba(50, 205, 50, 1);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}],["fauxFlip",{"usage":"// don't combine projectrix's setInlineStyles with animejs' animate; use utils.set\nimport { getProjection, clearInlineStyles } from 'projectrix';\nimport { animate, utils } from 'animejs';\n\nfunction fauxFlip(currentTarget: HTMLElement, nextTarget: HTMLElement): void {\n  const { toSubject, toTargetOrigin } = getProjection(currentTarget, nextTarget);\n\n  // set nextTarget to currentTarget's projection\n  utils.set(nextTarget, toSubject);\n  currentTarget.style.opacity = '0';\n  nextTarget.style.opacity = '1';\n\n  // FLIP nextTarget back to its origin\n  animate(nextTarget, {\n    ...toTargetOrigin,\n\n    duration: 1000,\n    ease: 'outQuad',\n\n    // clear inline styles from the projection once they're redundant\n    onComplete: () => clearInlineStyles(nextTarget),\n  });\n}\n","code":"<script lang=\"ts\">\n  import { onDestroy, onMount, tick } from 'svelte';\n  import { animate, utils, type JSAnimation } from 'animejs';\n  import { clearInlineStyles, getProjection } from 'projectrix';\n  import type { DemoProps } from '$lib/demos/demos.svelte';\n\n  // startSlot and options are part of demos infrastructure\n  let { startSlot, options }: DemoProps = $props();\n  const log = $derived(options.value.log);\n\n  let leftParent = $state() as HTMLElement;\n  let leftChildTarget = $state() as HTMLElement;\n  let rightParent = $state() as HTMLElement;\n  let rightChildTarget = $state() as HTMLElement;\n\n  let currentAnim: JSAnimation | undefined;\n  let currentTimeout: NodeJS.Timeout | undefined;\n\n  onMount(async () => {\n    await tick();\n    startSlot.show();\n\n    currentTimeout = setTimeout(() => {\n      const currentTarget: HTMLElement = startSlot.getSlotSubject();\n      flipToNextTarget(currentTarget, rightChildTarget);\n      startSlot.hide();\n    }, 1000);\n  });\n\n  onDestroy(() => {\n    currentAnim?.cancel();\n    clearTimeout(currentTimeout);\n  });\n\n  function flipToNextTarget(currentTarget: HTMLElement, nextTarget: HTMLElement): void {\n    currentAnim = fauxFlip(currentTarget, nextTarget);\n    currentAnim.then(() => {\n      currentAnim = animateParent(getNextParent(nextTarget));\n      currentAnim.then(() => {\n        currentTimeout = setTimeout(() => {\n          currentTarget = nextTarget;\n          flipToNextTarget(currentTarget, getNextTarget(currentTarget));\n        }, 1000);\n      });\n    });\n  }\n\n  function fauxFlip(currentTarget: HTMLElement, nextTarget: HTMLElement): JSAnimation {\n    const { toSubject, toTargetOrigin } = getProjection(currentTarget, nextTarget, { log });\n\n    utils.set(nextTarget, toSubject);\n    currentTarget.style.opacity = '0';\n    nextTarget.style.opacity = '1';\n\n    return animate(nextTarget, {\n      ...toTargetOrigin,\n\n      duration: 1000,\n      ease: 'outQuad',\n\n      onComplete: () => clearInlineStyles(nextTarget),\n    });\n  }\n\n  function animateParent(parent: HTMLElement): JSAnimation {\n    const dir = parent === rightParent ? -1 : 1;\n\n    return animate(parent, {\n      transform: [\n        'skew(' + 15 * dir + 'deg)',\n        'skew(' + 15 * dir + 'deg) rotate(' + -20 * dir + 'deg)',\n        'skew(' + 15 * dir + 'deg) rotate(' + 20 * dir + 'deg)',\n        'skew(' + 15 * dir + 'deg)',\n      ],\n\n      duration: 1000,\n      ease: 'inOutQuad',\n    });\n  }\n\n  function getNextParent(nextTarget: HTMLElement): HTMLElement {\n    return nextTarget === rightChildTarget ? rightParent : leftParent;\n  }\n\n  function getNextTarget(currentTarget: HTMLElement): HTMLElement {\n    return currentTarget === rightChildTarget ? leftChildTarget : rightChildTarget;\n  }\n</script>\n\n<div class=\"size-container\">\n  <div class=\"parents-container\">\n    <div bind:this={leftParent} class=\"parent left\">\n      <div bind:this={leftChildTarget} class=\"demo-target child\"></div>\n    </div>\n\n    <div bind:this={rightParent} class=\"parent right\">\n      <div bind:this={rightChildTarget} class=\"demo-target child\"></div>\n    </div>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .size-container {\n    position: relative;\n    margin-top: 1.5em;\n    width: 100%;\n    aspect-ratio: 4 / 1;\n\n    container-type: size;\n  }\n\n  .parents-container {\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    gap: 25cqw;\n  }\n\n  .parent {\n    border: dashed 3px darkmagenta;\n    width: 21cqw;\n    height: 21cqw;\n\n    will-change: transform;\n\n    .demo-target {\n      position: absolute;\n      left: 0px;\n      top: 0px;\n      border: solid 3px limegreen;\n      width: 10.75cqw;\n      height: 10.75cqw;\n\n      opacity: 0;\n    }\n  }\n  .left {\n    transform: skew(15deg);\n  }\n  .right {\n    transform: skew(-15deg);\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">// don't combine projectrix's setInlineStyles with animejs' animate; use utils.set</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">utils</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'animejs'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> fauxFlip</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">currentTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">nextTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // set nextTarget to currentTarget's projection</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  utils</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  currentTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  nextTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // FLIP nextTarget back to its origin</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'outQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // clear inline styles from the projection once they're redundant</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    onComplete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span>\n<span class=\"line\"></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onDestroy</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">animate</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">utils</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> JSAnimation</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'animejs'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">DemoProps</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/demos/demos.svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // startSlot and options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">startSlot</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">options</span><span style=\"color:#ABB2BF\"> }: </span><span style=\"color:#E5C07B\">DemoProps</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">props</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">derived</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">value</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftParent</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftChildTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightChildTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentAnim</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">JSAnimation</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentTimeout</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">NodeJS</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">Timeout</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">show</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentTimeout</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">      const</span><span style=\"color:#E5C07B\"> currentTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">getSlotSubject</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      flipToNextTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">rightChildTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      startSlot</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">hide</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }, </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onDestroy</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">cancel</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    clearTimeout</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTimeout</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> flipToNextTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">currentTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">nextTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> fauxFlip</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> animateParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#61AFEF\">getNextParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">));</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">      currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">        currentTimeout</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> setTimeout</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">          currentTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> nextTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">          flipToNextTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#61AFEF\">getNextTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">));</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        }, </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> fauxFlip</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">currentTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">nextTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">JSAnimation</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    utils</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">set</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    nextTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'outQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      onComplete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> animateParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">parent</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">JSAnimation</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> dir</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> parent</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#C678DD\"> ?</span><span style=\"color:#56B6C2\"> -</span><span style=\"color:#D19A66\">1</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#D19A66\"> 1</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#61AFEF\"> animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">parent</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      transform</span><span style=\"color:#ABB2BF\">: [</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">        'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">        'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg) rotate('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#56B6C2\"> -</span><span style=\"color:#D19A66\">20</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">        'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg) rotate('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 20</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#98C379\">        'skew('</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#D19A66\"> 15</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#E06C75\"> dir</span><span style=\"color:#56B6C2\"> +</span><span style=\"color:#98C379\"> 'deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ],</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">1000</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'inOutQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> getNextParent</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">nextTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#E06C75\"> nextTarget</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#E06C75\"> rightChildTarget</span><span style=\"color:#C678DD\"> ?</span><span style=\"color:#E06C75\"> rightParent</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> leftParent</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> getNextTarget</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">currentTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#E06C75\"> currentTarget</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#E06C75\"> rightChildTarget</span><span style=\"color:#C678DD\"> ?</span><span style=\"color:#E06C75\"> leftChildTarget</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightChildTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"size-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parents-container\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftParent</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parent left\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftChildTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-target child\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightParent</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"parent right\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightChildTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"demo-target child\"</span><span style=\"color:#ABB2BF\">>&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .size-container {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: relative;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    margin-top: 1.5em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 100%;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    aspect-ratio: 4 / 1;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: size;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .parents-container {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 100%;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 100%;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: flex;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: center;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: center;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    gap: 25cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .parent {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: dashed 3px darkmagenta;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 21cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 21cqw;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    will-change: transform;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    .demo-target {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      position: absolute;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      left: 0px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      top: 0px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      border: solid 3px limegreen;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      width: 10.75cqw;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      height: 10.75cqw;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      opacity: 0;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .left {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: skew(15deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .right {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: skew(-15deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}],["cssIsAwesome",{"usage":"// setInlineStyles and animejs' utils.set can both be used with waapi.animate\nimport { setInlineStyles, getProjection, clearInlineStyles } from 'projectrix';\nimport { waapi } from 'animejs';\n\nfunction fauxFlip(currentTarget: HTMLElement, nextTarget: HTMLElement): void {\n  const { toSubject, toTargetOrigin } = getProjection(currentTarget, nextTarget);\n\n  // set nextTarget to currentTarget's projection\n  setInlineStyles(nextTarget, toSubject);\n  currentTarget.style.opacity = '0';\n  nextTarget.style.opacity = '1';\n\n  // FLIP nextTarget back to its origin\n  waapi.animate(nextTarget, {\n    ...toTargetOrigin,\n\n    duration: 2000,\n    ease: 'inOutQuad',\n\n    // clear inline styles from the projection once they're redundant\n    onComplete: () => clearInlineStyles(nextTarget),\n  });\n}","code":"<script lang=\"ts\">\n  import { onDestroy, onMount, tick } from 'svelte';\n  import { waapi, type WAAPIAnimation } from 'animejs';\n  import { clearInlineStyles, getProjection, setInlineStyles } from 'projectrix';\n  import type { DemoProps } from '$lib/demos/demos.svelte';\n\n  // options are part of demos infrastructure\n  let { options }: DemoProps = $props();\n  const log = $derived(options.value.log);\n\n  let leftOuter = $state() as HTMLElement;\n  let leftInner = $state() as HTMLElement;\n  let leftTarget = $state() as HTMLElement;\n  let rightOuter = $state() as HTMLElement;\n  let rightInner = $state() as HTMLElement;\n  let rightTarget = $state() as HTMLElement;\n\n  type Side = 'left' | 'right';\n  const InitialSide = 'left';\n  function isLeft(side: Side): boolean {\n    return side === 'left';\n  }\n  function otherSide(side: Side): Side {\n    return isLeft(side) ? 'right' : 'left';\n  }\n\n  let currentAnim: WAAPIAnimation | undefined = undefined;\n\n  const ToNeutralDurationMs = 2000;\n  const ToFlipAnglesDurationMs = 2000;\n  const FlipDurationMs = 750;\n\n  onMount(async () => {\n    await tick();\n    toNeutralForSide(InitialSide);\n  });\n\n  onDestroy(() => {\n    currentAnim?.cancel();\n  });\n\n  function toNeutralForSide(side: Side): void {\n    raiseInnerForSide(side, ToNeutralDurationMs);\n\n    // using waapi so initial transforms from stylesheet are respected\n    currentAnim = waapi.animate([leftOuter, rightOuter], {\n      transform: 'rotateY(0deg)',\n\n      duration: ToNeutralDurationMs,\n      ease: 'linear',\n\n      onComplete: () => toFlipAnglesForSide(side),\n    });\n  }\n\n  function toFlipAnglesForSide(side: Side): void {\n    lowerInnerForSide(side, ToFlipAnglesDurationMs);\n\n    // switch which side the outer divs pivot on\n    leftOuter.style.transformOrigin = otherSide(side);\n    rightOuter.style.transformOrigin = side;\n\n    waapi.animate(leftOuter, {\n      transform: isLeft(side) ? 'rotateY(-66deg)' : 'rotateY(66deg)',\n\n      duration: ToFlipAnglesDurationMs,\n      ease: 'linear',\n    });\n    currentAnim = waapi.animate(rightOuter, {\n      transform: isLeft(side) ? 'rotateY(66deg)' : 'rotateY(-66deg)',\n\n      duration: ToFlipAnglesDurationMs,\n      ease: 'linear',\n\n      onComplete: () => flipFromSide(side),\n    });\n  }\n\n  function flipFromSide(side: Side): void {\n    const currentTarget = isLeft(side) ? leftTarget : rightTarget;\n    const nextTarget = isLeft(side) ? rightTarget : leftTarget;\n\n    currentAnim = fauxFlip(currentTarget, nextTarget);\n    currentAnim.then(() => {\n      toNeutralForSide(otherSide(side));\n    });\n  }\n\n  function fauxFlip(currentTarget: HTMLElement, nextTarget: HTMLElement): WAAPIAnimation {\n    const { toSubject, toTargetOrigin } = getProjection(currentTarget, nextTarget, { log });\n\n    setInlineStyles(nextTarget, toSubject);\n    currentTarget.style.opacity = '0';\n    nextTarget.style.opacity = '1';\n\n    return waapi.animate(nextTarget, {\n      ...toTargetOrigin,\n\n      duration: FlipDurationMs,\n      ease: 'inOutQuad',\n\n      onComplete: () => {\n        clearInlineStyles(nextTarget);\n      },\n    });\n  }\n\n  function raiseInnerForSide(side: Side, durationMs: number): void {\n    const inner = isLeft(side) ? leftInner : rightInner;\n    const target = isLeft(side) ? leftTarget : rightTarget;\n\n    const animParams = {\n      delay: durationMs * 0.25,\n      duration: durationMs * 0.5,\n      ease: 'linear',\n    };\n    waapi.animate(inner, {\n      transform: 'rotateX(47deg)',\n      ...animParams,\n    });\n    waapi.animate(target, {\n      transform: 'translateY(1em) rotateX(314deg) rotateY(360deg) translateY(-4em)',\n      ...animParams,\n    });\n  }\n\n  function lowerInnerForSide(side: Side, durationMs: number): void {\n    const inner = isLeft(side) ? leftInner : rightInner;\n    const target = isLeft(side) ? leftTarget : rightTarget;\n\n    const animParams = {\n      delay: durationMs * 0.25,\n      duration: durationMs * 0.75,\n      ease: 'linear',\n    };\n    waapi.animate(inner, {\n      transform: 'rotateX(80deg)',\n      ...animParams,\n    });\n    waapi.animate(target, {\n      transform: 'translateY(-4em) rotateX(280deg) rotateY(360deg) translateY(-4em)',\n      ...animParams,\n    });\n  }\n</script>\n\n<div class=\"two-sided-flex\">\n  <div bind:this={leftOuter} class=\"perspective-container left outer\">\n    <div bind:this={leftInner} class=\"perspective-container left inner\">\n      <div bind:this={leftTarget} class=\"target left\">\n        <span>css is awesome</span>\n      </div>\n    </div>\n  </div>\n  <div bind:this={rightOuter} class=\"perspective-container right outer\">\n    <div bind:this={rightInner} class=\"perspective-container right inner\">\n      <div bind:this={rightTarget} class=\"target right\">\n        <span>css is awesome</span>\n      </div>\n    </div>\n  </div>\n</div>\n\n<style lang=\"scss\">\n  .two-sided-flex {\n    position: relative;\n    margin-top: 1.5em;\n\n    width: 100%;\n    aspect-ratio: 3.6 / 1;\n    container-type: inline-size;\n\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n  }\n\n  .perspective-container {\n    font-size: 1.6cqw;\n\n    border: solid 3px purple;\n    width: 15em;\n    height: 15em;\n\n    color: purple;\n  }\n\n  .outer {\n    position: relative;\n    padding: 1em;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    perspective: 200px;\n    transform-style: preserve-3d;\n  }\n  .left.outer {\n    transform-origin: left;\n    transform: rotateY(66deg);\n  }\n  .right.outer {\n    transform-origin: right;\n    transform: rotateY(-66deg);\n  }\n\n  .inner {\n    width: 14em;\n    height: 14em;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    transform-origin: bottom;\n    transform: rotateX(80deg);\n    transform-style: preserve-3d;\n  }\n\n  .target {\n    border: solid 3px limegreen;\n    padding: 0.4em;\n    width: 9.4em;\n    height: 12em;\n\n    color: limegreen;\n    background-color: #12415a55;\n    font-weight: 300;\n\n    transform: translateY(-4em) rotateX(280deg) rotateY(360deg) translateY(-4em);\n\n    span {\n      font-size: 3.6em;\n    }\n  }\n  .right.target {\n    opacity: 0;\n  }\n</style>\n","usageHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">// setInlineStyles and animejs' utils.set can both be used with waapi.animate</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">waapi</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'animejs'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">function</span><span style=\"color:#61AFEF\"> fauxFlip</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">currentTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">nextTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // set nextTarget to currentTarget's projection</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  currentTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  nextTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // FLIP nextTarget back to its origin</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">  waapi</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#D19A66\">2000</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'inOutQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // clear inline styles from the projection once they're redundant</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    onComplete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">}</span></span></code></pre>","codeHL":"<pre class=\"shiki one-dark-pro\" style=\"background-color:#282c34;color:#abb2bf\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">script</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"ts\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">onDestroy</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">onMount</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">tick</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">waapi</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#C678DD\">type</span><span style=\"color:#E06C75\"> WAAPIAnimation</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'animejs'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">clearInlineStyles</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">getProjection</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">setInlineStyles</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> 'projectrix'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  import</span><span style=\"color:#C678DD\"> type</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">DemoProps</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#C678DD\">from</span><span style=\"color:#98C379\"> '$lib/demos/demos.svelte'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">  // options are part of demos infrastructure</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E06C75\">options</span><span style=\"color:#ABB2BF\"> }: </span><span style=\"color:#E5C07B\">DemoProps</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">props</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> log</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">derived</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E5C07B\">options</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">value</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftOuter</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftInner</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightOuter</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightInner</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> $</span><span style=\"color:#61AFEF\">state</span><span style=\"color:#ABB2BF\">() </span><span style=\"color:#C678DD\">as</span><span style=\"color:#E5C07B\"> HTMLElement</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  type</span><span style=\"color:#E5C07B\"> Side</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> 'left'</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#98C379\">'right'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> InitialSide</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> 'left'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">side</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">boolean</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#E06C75\"> side</span><span style=\"color:#56B6C2\"> ===</span><span style=\"color:#98C379\"> 'left'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> otherSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">side</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#98C379\"> 'right'</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#98C379\"> 'left'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  let</span><span style=\"color:#E06C75\"> currentAnim</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">WAAPIAnimation</span><span style=\"color:#ABB2BF\"> | </span><span style=\"color:#E5C07B\">undefined</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> undefined</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> ToNeutralDurationMs</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 2000</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> ToFlipAnglesDurationMs</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 2000</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  const</span><span style=\"color:#E5C07B\"> FlipDurationMs</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#D19A66\"> 750</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onMount</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#C678DD\">async</span><span style=\"color:#ABB2BF\"> () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    await</span><span style=\"color:#61AFEF\"> tick</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    toNeutralForSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">InitialSide</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">  onDestroy</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">?.</span><span style=\"color:#61AFEF\">cancel</span><span style=\"color:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> toNeutralForSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">side</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    raiseInnerForSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">ToNeutralDurationMs</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // using waapi so initial transforms from stylesheet are respected</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> waapi</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">animate</span><span style=\"color:#ABB2BF\">([</span><span style=\"color:#E06C75\">leftOuter</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">rightOuter</span><span style=\"color:#ABB2BF\">], {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'rotateY(0deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">ToNeutralDurationMs</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      onComplete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> toFlipAnglesForSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> toFlipAnglesForSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">side</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    lowerInnerForSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">ToFlipAnglesDurationMs</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#7F848E;font-style:italic\">    // switch which side the outer divs pivot on</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    leftOuter</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">transformOrigin</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> otherSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    rightOuter</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">transformOrigin</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E06C75\"> side</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    waapi</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">leftOuter</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#61AFEF\">isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#98C379\"> 'rotateY(-66deg)'</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#98C379\"> 'rotateY(66deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">ToFlipAnglesDurationMs</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#E5C07B\"> waapi</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">rightOuter</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#61AFEF\">isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#98C379\"> 'rotateY(66deg)'</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#98C379\"> 'rotateY(-66deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">ToFlipAnglesDurationMs</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      onComplete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#61AFEF\"> flipFromSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> flipFromSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">side</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> currentTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> nextTarget</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">    currentAnim</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> fauxFlip</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentAnim</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">then</span><span style=\"color:#ABB2BF\">(() </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      toNeutralForSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#61AFEF\">otherSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">));</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> fauxFlip</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">currentTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">nextTarget</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">HTMLElement</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">WAAPIAnimation</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#ABB2BF\"> { </span><span style=\"color:#E5C07B\">toSubject</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E5C07B\">toTargetOrigin</span><span style=\"color:#ABB2BF\"> } </span><span style=\"color:#56B6C2\">=</span><span style=\"color:#61AFEF\"> getProjection</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">currentTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, { </span><span style=\"color:#E06C75\">log</span><span style=\"color:#ABB2BF\"> });</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">    setInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75\">toSubject</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    currentTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '0'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    nextTarget</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E5C07B\">style</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#E06C75\">opacity</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#98C379\"> '1'</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    return</span><span style=\"color:#E5C07B\"> waapi</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">toTargetOrigin</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">FlipDurationMs</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'inOutQuad'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">      onComplete</span><span style=\"color:#ABB2BF\">: () </span><span style=\"color:#C678DD\">=></span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#61AFEF\">        clearInlineStyles</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">nextTarget</span><span style=\"color:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> raiseInnerForSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">side</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">durationMs</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">number</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> inner</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> leftInner</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightInner</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> target</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> animParams</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      delay</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">durationMs</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 0.25</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">durationMs</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 0.5</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    };</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    waapi</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">inner</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'rotateX(47deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">animParams</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    waapi</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'translateY(1em) rotateX(314deg) rotateY(360deg) translateY(-4em)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">animParams</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">  function</span><span style=\"color:#61AFEF\"> lowerInnerForSide</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75;font-style:italic\">side</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">Side</span><span style=\"color:#ABB2BF\">, </span><span style=\"color:#E06C75;font-style:italic\">durationMs</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E5C07B\">number</span><span style=\"color:#ABB2BF\">): </span><span style=\"color:#E5C07B\">void</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> inner</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> leftInner</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightInner</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> target</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#61AFEF\"> isLeft</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">side</span><span style=\"color:#ABB2BF\">) </span><span style=\"color:#C678DD\">?</span><span style=\"color:#E06C75\"> leftTarget</span><span style=\"color:#C678DD\"> :</span><span style=\"color:#E06C75\"> rightTarget</span><span style=\"color:#ABB2BF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#C678DD\">    const</span><span style=\"color:#E5C07B\"> animParams</span><span style=\"color:#56B6C2\"> =</span><span style=\"color:#ABB2BF\"> {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      delay</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">durationMs</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 0.25</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      duration</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#E06C75\">durationMs</span><span style=\"color:#56B6C2\"> *</span><span style=\"color:#D19A66\"> 0.75</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      ease</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'linear'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    };</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    waapi</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">inner</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'rotateX(80deg)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">animParams</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#E5C07B\">    waapi</span><span style=\"color:#ABB2BF\">.</span><span style=\"color:#61AFEF\">animate</span><span style=\"color:#ABB2BF\">(</span><span style=\"color:#E06C75\">target</span><span style=\"color:#ABB2BF\">, {</span></span>\n<span class=\"line\"><span style=\"color:#E06C75\">      transform</span><span style=\"color:#ABB2BF\">: </span><span style=\"color:#98C379\">'translateY(-4em) rotateX(280deg) rotateY(360deg) translateY(-4em)'</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      ...</span><span style=\"color:#E06C75\">animParams</span><span style=\"color:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">script</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"two-sided-flex\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftOuter</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"perspective-container left outer\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftInner</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"perspective-container left inner\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">leftTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"target left\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">>css is awesome&#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightOuter</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"perspective-container right outer\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightInner</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"perspective-container right inner\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;</span><span style=\"color:#E06C75\">div</span><span style=\"color:#C678DD\"> bind</span><span style=\"color:#ABB2BF\">:</span><span style=\"color:#E5C07B\">this</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#C678DD\">{</span><span style=\"color:#E06C75\">rightTarget</span><span style=\"color:#C678DD\">}</span><span style=\"color:#D19A66\"> class</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"target right\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">        &#x3C;</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">>css is awesome&#x3C;/</span><span style=\"color:#E06C75\">span</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  &#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">div</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;</span><span style=\"color:#E06C75\">style</span><span style=\"color:#D19A66\"> lang</span><span style=\"color:#ABB2BF\">=</span><span style=\"color:#98C379\">\"scss\"</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .two-sided-flex {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: relative;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    margin-top: 1.5em;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 100%;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    aspect-ratio: 3.6 / 1;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    container-type: inline-size;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: flex;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: space-around;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: center;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .perspective-container {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    font-size: 1.6cqw;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: solid 3px purple;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 15em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 15em;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    color: purple;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .outer {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    position: relative;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    padding: 1em;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: flex;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: center;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: center;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    perspective: 200px;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-style: preserve-3d;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .left.outer {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-origin: left;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotateY(66deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .right.outer {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-origin: right;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotateY(-66deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .inner {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 14em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 14em;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    display: flex;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    justify-content: center;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    align-items: center;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-origin: bottom;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: rotateX(80deg);</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform-style: preserve-3d;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .target {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    border: solid 3px limegreen;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    padding: 0.4em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    width: 9.4em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    height: 12em;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    color: limegreen;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    background-color: #12415a55;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    font-weight: 300;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    transform: translateY(-4em) rotateX(280deg) rotateY(360deg) translateY(-4em);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    span {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">      font-size: 3.6em;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  .right.target {</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">    opacity: 0;</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">  }</span></span>\n<span class=\"line\"><span style=\"color:#ABB2BF\">&#x3C;/</span><span style=\"color:#E06C75\">style</span><span style=\"color:#ABB2BF\">></span></span>\n<span class=\"line\"></span></code></pre>"}]]);